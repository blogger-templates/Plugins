(()=>{function e(){if($("body").find(".item-post").length){var e=$("#post-page-sidebar .widget");e.length&&e.appendTo("#post-page-sidebar-content")}}function t(){let e=document.getElementById("mobile-search-modal");if(!e)return;let t=document.querySelectorAll(".mobile-search-input, .mobile-search-button"),a=document.getElementById("ms-back-btn"),i=document.getElementById("ms-input"),n=document.getElementById("ms-form"),s=document.getElementById("ms-default-view"),l=document.getElementById("ms-results-view"),r=document.getElementById("ms-history-container"),o=document.getElementById("ms-popular-container"),d="abefilmSearchHistory",c,_=()=>{e.classList.add("active"),document.body.classList.add("ms-modal-open"),i.focus(),y()},p=()=>{e.classList.remove("active"),document.body.classList.remove("ms-modal-open"),i.value="",b()},m=()=>JSON.parse(localStorage.getItem(d)||"[]"),u=e=>{if(!e||!e.trim())return;let t=m().filter(t=>t.toLowerCase()!==e.toLowerCase());t.unshift(e),t.length>3&&t.pop(),localStorage.setItem(d,JSON.stringify(t))},g=e=>{let t=m().filter(t=>t.toLowerCase()!==e.toLowerCase());localStorage.setItem(d,JSON.stringify(t)),v()},h=()=>{localStorage.removeItem(d),v()},v=()=>{let e=m();if(0===e.length){r.innerHTML="";return}let t='\n            <div class="ms-section-title ms-history-header">\n                <span>Search History</span>\n                <button class="clear-btn">Clear All</button>\n            </div>\n            <ul>';e.forEach(e=>{t+='\n                <li>\n                    <a href="/search?q='+encodeURIComponent(e)+'">'+e+'</a>\n                    <button class="delete-item-btn" data-term="'+e+'">&times;</button>\n                </li>'}),t+="</ul>",r.innerHTML=t},f=()=>{o.innerHTML='\n        <div class="ms-section-title ms-popular-header">\n            <span>\uD83D\uDD25 Latest Posts</span>\n        </div>\n        <div class="ms-loader">Loading...</div>',fetch("/feeds/posts/default?alt=json&max-results=8&orderby=published").then(e=>e.json()).then(e=>{if(!e.feed||!e.feed.entry||0===e.feed.entry.length){o.innerHTML="";return}let t='\n                <div class="ms-section-title ms-popular-header">\n                    <span>\uD83D\uDD25 Latest Posts</span>\n                </div>\n                <ul>';e.feed.entry.forEach((e,a)=>{t+='\n                    <li>\n                        <span class="rank-number '+(a<3?"top-3":"")+'">'+(a+1)+'</span>\n                        <a href="'+e.link.find(e=>"alternate"===e.rel).href+'">'+e.title.$t+"</a>\n                    </li>"}),t+="</ul>",o.innerHTML=t}).catch(e=>{console.error("Error fetching popular posts:",e),o.innerHTML=""})},y=()=>{v(),f()},b=()=>{s.style.display="block",l.style.display="none"};window.renderDefaultView=y;let w=()=>{s.style.display="none",l.style.display="block"},k=e=>{w(),l.innerHTML='<div class="ms-loader">Searching...</div>',fetch("/feeds/posts/default?alt=json&q="+encodeURIComponent(e)+"&max-results=10").then(e=>e.json()).then(e=>{if(!e.feed||!e.feed.entry||0===e.feed.entry.length){l.innerHTML='<div class="ms-no-results">No results found.</div>';return}Promise.all(e.feed.entry.map(e=>{let t=e.link.find(e=>"alternate"===e.rel).href;return fetch(t).then(e=>e.text()).then(a=>{let i=new DOMParser().parseFromString(a,"text/html"),n=i.querySelector('img[alt="poster"]')?.src||"https://resources.blogblog.com/img/blank.gif",s=i.querySelector("#extra-meta .meta-year")?.textContent.trim()||"",l=i.querySelector("#extra-meta .meta-type")?.textContent.trim()||"",r={title:e.title.$t,url:t,imageUrl:n,year:s,type:l};return r}).catch(()=>null)})).then(e=>{let t=e.filter(Boolean);if(0===t.length){l.innerHTML='<div class="ms-no-results">No results found.</div>';return}let a="<ul>";t.forEach(e=>{a+='\n                            <li>\n                                <a href="'+e.url+'">\n                                    <img class="result-thumb" src="'+e.imageUrl+'" alt="'+e.title+'" loading="lazy"/>\n                                    <div class="result-info">\n                                        <h3 class="title">'+e.title+'</h3>\n                                        <p class="meta">'+e.year+(e.year&&e.type?" \xb7 ":"")+e.type+"</p>\n                                    </div>\n                                </a>\n                            </li>"}),a+="</ul>",l.innerHTML=a,l.addEventListener("click",e=>{let t=e.target.closest("a");if(t){e.preventDefault();u(i.value.trim()),window.location.href=t.href}})})}).catch(e=>{l.innerHTML='<div class="ms-no-results">An error occurred.</div>'})};t.forEach(e=>{e.addEventListener("click",e=>{e.preventDefault(),_()}),e.addEventListener("focus",e=>{e.preventDefault(),e.target.blur(),_()})}),a.addEventListener("click",p),i.addEventListener("input",()=>{clearTimeout(c);let e=i.value.trim();e.length>1?c=setTimeout(()=>{k(e)},300):b()}),n.addEventListener("submit",e=>{e.preventDefault();let t=i.value.trim();t&&(u(t),window.location.href="/search?q="+encodeURIComponent(t))}),r.addEventListener("click",e=>{e.target.classList.contains("delete-item-btn")&&g(e.target.dataset.term),e.target.classList.contains("clear-btn")&&h()});let C=document.getElementById("bottom-nav-search-trigger");C&&C.addEventListener("click",e=>{e.preventDefault(),_()})}function a(){document.querySelectorAll(".comment-content:not(.tags-transformed)").forEach(e=>{let t=e.innerHTML;t.includes("[QA]")&&(t=t.replace(/\[QA\](.*?)\[OPT\](.*?)\[\/QA\]/g,(t,a,i)=>{let n=e.closest(".comment"),s="Join the discussion...",l="";if(n){l="qa-source-"+n.id,n.setAttribute("data-qa-id",l);let r=n.querySelector(".comment-replies");if(r){let o=r.querySelectorAll("li.comment").length;if(o>0){let d=o;o>=1e3&&(d=(o/1e3).toFixed(1).replace(/\.0$/,"")+"K"),s=d+" replies and discussion"}}}let c=i.split("[OPT]").map(e=>'<span class="qa-option">'+e.trim()+"</span>").join("");return'<div class="qa-card" data-qa-id="'+l+'">\n                  <div class="qa-title"><span class="qa-icon">#</span>'+a.trim()+'</div>\n                  <div class="qa-options">'+c+'</div>\n                  <a class="qa-footer" href="javascript:void(0)"><svg class="qa-stats-icon" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><g><rect x="4" y="10" width="4" height="10" rx="1"></rect><rect x="10" y="4" width="4" height="16" rx="1"></rect><rect x="16" y="6" width="4" height="14" rx="1"></rect></g></svg><span>'+s+'</span><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" fill="currentColor" viewBox="0 0 16 16" style="margin-left: 4px; font-weight: bold;"><path fill-rule="evenodd" d="M4.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L10.293 8 4.646 2.354a.5.5 0 0 1 0-.708z"/></svg></a>\n                </div>'}));let a=(e,t)=>{let a=t.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&"),i=(a=a.replace(/<br\s*\/?>/gi,"\n")).replace(/</g,"&lt;").replace(/>/g,"&gt;"),n="copied-msg-"+Math.random().toString(36).substr(2,9);return'<div class="comment-code-wrapper">\n            <pre><code class="hljs">'+i+'</code></pre>\n            <button class="copy-code-btn" title="Copy code" onclick="navigator.clipboard.writeText(this.previousElementSibling.querySelector(\'code\').textContent).then(() => { const msg = document.getElementById(\''+n+'\'); msg.classList.add(\'show\'); setTimeout(() => msg.classList.remove(\'show\'), 2000); });">\n              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none"><path d="M16.9637 8.98209C16.9613 6.03194 16.9167 4.50384 16.0578 3.45753C14.4008 1.99854 12.7609 1.99854 9.48087 1.99854C6.20089 1.99854 4.5609 1.99854 3.45708 2.90436C1.99799 4.56128 1.99799 6.20116 1.99799 9.48091C1.99799 12.7607 1.99799 14.4005 2.90387 15.5043C4.50346 16.9162 6.03167 16.9608 8.98201 16.9632" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path><path d="M14.0283 9.02455L16.994 8.98193M14.0143 22.0013L16.9799 21.9586M21.9716 14.0221L21.9436 16.9818M9.01033 14.0357L8.98236 16.9953M11.4873 9.02455C10.6545 9.17371 9.31781 9.32713 9.01033 11.0488M19.4946 21.9586C20.3296 21.8223 21.6685 21.6894 22.0025 19.9726M19.4946 9.02455C20.3274 9.17371 21.6641 9.32713 21.9716 11.0488M11.5 21.9573C10.6672 21.8086 9.33039 21.6559 9.02197 19.9344" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></svg>\n            </button>\n            <span class="code-copied-msg" id="'+n+'">Copied!</span>\n          </div>'};t=(t=(t=(t=t.replace(/\[pre\]([\s\S]*?)\[\/pre\]/g,a)).replace(/\[code\]([\s\S]*?)\[\/code\]/g,'<code class="comment-inline-code hljs">$1</code>')).replace(/\[quote\]([\s\S]*?)\[\/quote\]/g,"<blockquote>$1</blockquote>")).replace(/\[tag\]([\s\S]*?)\[\/tag\]/g,'<b class="comment-tag">@$1</b>'),e.innerHTML=t,e.classList.add("tags-transformed"),"undefined"!=typeof hljs&&e.querySelectorAll("pre code.hljs").forEach(e=>{hljs.highlightElement(e),"function"==typeof hljs.lineNumbersBlock&&hljs.lineNumbersBlock(e)})})}function i(){if(!document.querySelector(".account-page-container"))return;let e=(JSON.parse(localStorage.getItem("abefilmUserWatchlist"))||[]).length,t=(JSON.parse(localStorage.getItem("watchHistoryIDs"))||[]).length,a=(JSON.parse(localStorage.getItem("abefilm_favorites"))||[]).length,i=document.querySelector('a[href="/p/watchlist.html"] .item-value'),n=document.querySelector('a[href="/p/history.html"] .item-value'),s=document.querySelector('a[href="/p/favorite.html"] .item-value');i&&(e>0?(i.textContent=e,i.classList.add("is-badge")):(i.textContent="View",i.classList.remove("is-badge"))),n&&(n.textContent=t>0?t:"View"),s&&(s.textContent=a>0?a:"View")}document.body.classList.add("no-transition"),"collapsed"===localStorage.getItem("sidebarState")&&document.body.classList.add("sidebar-collapsed"),window.removeFromHistory=function(e){if(!e)return;let t=JSON.parse(localStorage.getItem("watchHistoryIDs")||"[]");t=t.filter(t=>String(t)!==String(e)),localStorage.setItem("watchHistoryIDs",JSON.stringify(t));let a=document.getElementById("history-item-"+e);a&&a.remove();let i=document.getElementById("history-items-list");i&&0===i.children.length&&(document.getElementById("history-empty-message").style.display="block"),"function"==typeof window.updateHistoryBadge&&window.updateHistoryBadge()},document.addEventListener("DOMContentLoaded",function(){let e=document.getElementById("comments");e&&e.addEventListener("click",function(e){let t=e.target.closest(".qa-footer");if(t){e.preventDefault();let a=t.closest(".qa-card");if(a){let i=document.querySelector('.comment[data-qa-id="'+a.dataset.qaId+'"]');if(i){let n=i.querySelector(".comment-actions a.comment-reply");n&&n.click()}}}});let t=document.body,a=document.getElementById("sidebarToggle");setTimeout(()=>{t.classList.remove("no-transition")},100),a&&a.addEventListener("click",()=>{t.classList.toggle("sidebar-collapsed"),localStorage.setItem("sidebarState",t.classList.contains("sidebar-collapsed")?"collapsed":"expanded"),setTimeout(function(){$("#dynamic-main-slider, #PopularPosts1 .owl-carousel").trigger("refresh.owl.carousel")},350)});let i=window.location.pathname,n=document.querySelectorAll(".sidebar-nav a"),s=null,l=-1;n.forEach(e=>{let t=e.getAttribute("href");if(!t||!t.startsWith("#"))try{let a=new URL(e.href).pathname;"/"===a&&"/"===i?(s=e,l=1):"/"!==a&&i.startsWith(a)&&a.length>l&&(l=a.length,s=e)}catch{}}),s&&(n.forEach(e=>e.parentElement.classList.remove("active")),s.parentElement.classList.add("active"));let r=document.querySelector('a[href="#clear-cache"]');if(r&&r.addEventListener("click",function(e){e.preventDefault(),confirm("This will clear cached data. Continue?")&&(localStorage.clear(),sessionStorage.clear(),alert("Cache cleared. The page will now reload."),window.location.reload(!0))}),document.body.classList.contains("final-layout-script-loaded"))return;document.body.classList.add("final-layout-script-loaded");let o=document.querySelector(".post-page-final-container");if(o){try{var d,c;let _=function(e){if(!e)return;let t=JSON.parse(localStorage.getItem("watchHistoryIDs")||"[]");(t=t.filter(t=>String(t)!==String(e))).unshift(e),t.length>50&&t.pop(),localStorage.setItem("watchHistoryIDs",JSON.stringify(t))},p=function(e){let t=F[U=e]?.length||0,a=Math.ceil(t/50),i=o.querySelector(".episodes-pagination-final"),n=o.querySelector(".episodes-grid-container-final"),s=o.querySelector("#episodes-content").querySelector(".total-ep-header");if(s&&s.remove(),t>0&&i.insertAdjacentHTML("beforebegin",'\n                    <div class="total-ep-header">\n                        <p class="total-ep-count">Total Episodes: '+t+'</p>\n                        <button class="all-episodes-btn-mobile">\n                            All Episodes\n                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">\n                              <path fill-rule="evenodd" d="M4.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L10.293 8 4.646 2.354a.5.5 0 0 1 0-.708z"/>\n                            </svg>\n                        </button>\n                    </div>\n                '),i.innerHTML="",n.innerHTML="",0===t)return;i.innerHTML=(t>50?'<div class="ep-range-tabs-container"></div>':"")+'\n                <div class="ep-range-dropdown">\n                    <button class="ep-range-dropdown-toggle"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor"><path fill-rule="evenodd" d="M4.22 6.22a.75.75 0 0 1 1.06 0L8 8.94l2.72-2.72a.75.75 0 1 1 1.06 1.06l-3.25 3.25a.75.75 0 0 1-1.06 0L4.22 7.28a.75.75 0 0 1 0-1.06Z" clip-rule="evenodd" /></svg></button>\n                    <div class="ep-range-dropdown-menu"></div>\n                </div>';for(let l=0;l<a;l++){let r=document.createElement("div");r.className="episodes-grid-final",r.dataset.page=l+1,n.appendChild(r);for(let d=0;d<50;d++){let c=50*l+d+1;if(c>t)break;let _=document.createElement("a");_.className="ep-button",_.dataset.epIndex=c-1,_.innerHTML='<span class="ep-number-text">'+c+'</span><span class="ep-active-indicator"><svg viewBox="0 0 24 24"><rect class="bar bar1" x="4" y="8" width="4" height="10" rx="1"></rect><rect class="bar bar2" x="10" y="4" width="4" height="16" rx="1"></rect><rect class="bar bar3" x="16" y="10" width="4" height="8" rx="1"></rect></svg></span>',r.appendChild(_)}}G>=t&&(G=0);let p=document.getElementById("all-episodes-modal-overlay"),m=document.getElementById("all-episodes-modal-grid"),g=p.querySelector(".episodes-modal-close-btn"),h=()=>{m.innerHTML="",o.querySelectorAll(".episodes-grid-final .ep-button").forEach(e=>{let t=e.cloneNode(!0);m.appendChild(t)}),p.classList.add("is-visible"),document.body.style.overflow="hidden"},v=()=>{p.classList.remove("is-visible"),document.body.style.overflow=""},f=o.querySelector(".all-episodes-btn-mobile");f&&(f.onclick=h),g.onclick=v,p.onclick=e=>{e.target===p&&v()},m.onclick=e=>{let t=e.target.closest(".ep-button");if(t){e.preventDefault();let a=parseInt(t.dataset.epIndex,10);u(a),v()}},u(G)},m=function(){Y.innerHTML="",D.forEach(e=>{let t=document.createElement("button");t.className="server-btn",t.dataset.server=e;let a=f.querySelector('ul[data-server-name="'+e+'"]'),i=a?a.dataset.serverLogo:null,n="";n=i?'<img src="'+i+'" alt="'+e+'" class="server-logo-img"/> <span class="server-name-text">'+e+"</span>":'<span class="server-name-text">'+e+"</span>",t.innerHTML=n,e===U&&t.classList.add("active"),Y.appendChild(t)})},u=function(e){let t=F[U]?.length||0;if(e<0||e>=t)return;G=e;let a={server:U,episode:G};localStorage.setItem(N,JSON.stringify(a));let i=document.getElementById("post-id");if(i){let n=i.getAttribute("data-post-id");if(n)try{let s=JSON.parse(localStorage.getItem("abefilmWatchProgress")||"{}");s["post-"+n]=e,localStorage.setItem("abefilmWatchProgress",JSON.stringify(s))}catch(l){console.error("Could not save watch progress",l)}}P.src=F[U][e].href,en.textContent=e+1+" / "+t,document.querySelectorAll(".episodes-grid-container-final, #all-episodes-modal-grid").forEach(t=>{let a=t.querySelector(".ep-button.active");a&&a.classList.remove("active");let i=t.querySelector('.ep-button[data-ep-index="'+e+'"]');i&&(i.classList.add("active"),t.classList.contains("episodes-grid-container-final")&&i.scrollIntoView({behavior:"smooth",block:"nearest",inline:"center"}))}),ea.disabled=0===e,ei.disabled=e===t-1;let r=Math.floor(e/50)+1,d=o.querySelector(".episodes-pagination-final");if(d&&d.innerHTML){let c=d.querySelector(".ep-range-tabs-container .ep-range-tab.active");c&&parseInt(c.dataset.page,10)===r||(g(r),h(r))}},g=function(e){let t=F[U]?.length||0,a=Math.ceil(t/50),i=o.querySelector(".episodes-pagination-final"),n=i.querySelector(".ep-range-tabs-container"),s=i.querySelector(".ep-range-dropdown-menu");n&&(n.innerHTML=""),s.innerHTML="";let l=1;a>3&&e>3&&(l=3*Math.floor((e-1)/3)+1);for(let r=0;r<a;r++){let d=r+1,c=50*r+1,_=Math.min((r+1)*50,t),p=c+"-"+_,m=document.createElement("a");if(m.className="ep-range-tab",m.href="#",m.dataset.page=d,m.innerHTML="<span>"+p+"</span>",d===e&&m.classList.add("active"),s.appendChild(m),n&&d>=l&&d<l+3){let u=document.createElement("button");u.className="ep-range-tab",u.dataset.page=d,u.innerHTML="<span>"+p+"</span>",d===e&&u.classList.add("active"),n.appendChild(u)}}let g=i.querySelector(".ep-range-dropdown-toggle");g&&(g.style.display=a>1?"flex":"none")},h=function(e){o.querySelectorAll(".episodes-grid-final").forEach(t=>{t.classList.toggle("active",t.dataset.page==e)})},v=document.querySelector("#source-data-container");if(!v)throw Error("Source data container (#source-data-container) not found.");let f=v.querySelector(".post-body");if(!f)throw Error("Source data element (.post-body) not found inside hidden container.");let y=()=>v.querySelector(".entry-title")?.textContent.trim()||"",b=e=>f.querySelector(e)?.textContent.trim()||"",w=f.querySelector(d='img[alt="poster"]')?.getAttribute("src")||"",k=b("span.slider-backdrop"),C=b("#extra-meta .meta-rating"),L=b("#extra-meta .meta-year"),x=b("#extra-meta .meta-pg"),E=b("#extra-meta .meta-status"),S=b("#extra-meta .meta-country"),I=Array.from(f.querySelectorAll("#extra-meta .meta-genre")).map(e=>e.textContent.trim()),M=o.querySelector("#add-to-watchlist-btn");if(M){let B=new URL(window.location.href).pathname,q=y(),A=window.location.href,H=k||w;M.setAttribute("data-post-id",B),M.setAttribute("data-post-title",q),M.setAttribute("data-post-url",A),M.setAttribute("data-post-image",H),$(document).trigger("abefilm:postDataReady",[{id:B,title:q,url:A,image:H}])}o.querySelectorAll(".details-header-final").forEach(e=>{e.querySelector(".poster-final img").src=w,e.querySelector(".title-final").textContent=y();let t=e.querySelector(".meta-line-final");C&&(t.innerHTML+='<span class="rating"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="18" height="18" fill="none">\n    <path d="M15.0183 9.43335L15.5462 10.498C15.6182 10.6462 15.8102 10.7883 15.9722 10.8155L16.9291 10.9758C17.541 11.0787 17.685 11.5263 17.244 11.9678L16.5001 12.7179C16.3741 12.8449 16.3051 13.0899 16.3441 13.2653L16.5571 14.1938C16.7251 14.9288 16.3381 15.2131 15.6932 14.829L14.7963 14.2937C14.6343 14.1969 14.3674 14.1969 14.2024 14.2937L13.3055 14.829C12.6636 15.2131 12.2736 14.9258 12.4416 14.1938L12.6546 13.2653C12.6935 13.0899 12.6246 12.8449 12.4986 12.7179L11.7547 11.9678C11.3167 11.5263 11.4577 11.0787 12.0696 10.9758L13.0265 10.8155C13.1855 10.7883 13.3775 10.6462 13.4495 10.498L13.9774 9.43335C14.2654 8.85568 14.7333 8.85568 15.0183 9.43335Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" /><path d="M8 17L8 20.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" /><path d="M8 3.5V7" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" /><path d="M22 8.87895C21.9331 7.33687 21.7456 6.33298 21.2203 5.53884C20.9181 5.08196 20.5428 4.68459 20.1112 4.36468C18.9447 3.5 17.299 3.5 14.0078 3.5H9.99305C6.70178 3.5 5.05614 3.5 3.88962 4.36468C3.45805 4.68459 3.08267 5.08196 2.78047 5.53884C2.25526 6.33289 2.06776 7.33665 2.00083 8.87843C1.98938 9.14208 2.21648 9.34375 2.46531 9.34375C3.85109 9.34375 4.97449 10.533 4.97449 12C4.97449 13.467 3.85109 14.6562 2.46531 14.6562C2.21648 14.6562 1.98938 14.8579 2.00083 15.1216C2.06776 16.6634 2.25526 17.6671 2.78047 18.4612C3.08267 18.918 3.45805 19.3154 3.88962 19.6353C5.05614 20.5 6.70178 20.5 9.99306 20.5H14.0078C17.299 20.5 18.9447 20.5 20.1112 19.6353C20.5428 19.3154 20.9181 18.918 21.2203 18.4612C21.7456 17.667 21.9331 16.6631 22 15.1211V8.87895Z" stroke="grey" stroke-width="1.5" stroke-linejoin="round" />\n</svg> '+C+"</span>"),L&&(t.innerHTML+="<span>"+L+"</span>"),S&&(t.innerHTML+="<span>"+S+"</span>"),x&&(t.innerHTML+="<span>"+x+"</span>");let a=e.querySelector(".tags-line-final");if(I.forEach(e=>a.innerHTML+='<span class="tag">'+e+"</span>"),E){let i=e.querySelector(".meta-line-final");i&&i.insertAdjacentHTML("afterend",'<div style="font-size:13px; color:#a7a7a7; margin-top:8px;">'+E+"</div>")}}),o.querySelector(".synopsis-final").textContent=f.querySelector("#overview-data")?.textContent.trim()||"";let T=f.querySelectorAll("#celebrity-data li");if(T.length>0){let j=o.querySelector("#celebrity-section"),z=o.querySelector(".celebrity-grid-final");j.style.display="block",T.forEach(e=>{let t=e.querySelector("img")?.src||"",a=e.querySelector("span")?.textContent||"";z.innerHTML+='<div class="celebrity-item-final"><img src="'+t+'" alt="'+a+'"/><span class="name">'+a+"</span></div>"})}let F={},D=[];f.querySelectorAll("#episodes-data > ul[data-server-name]").forEach(e=>{let t=e.dataset.serverName;t&&e.querySelectorAll("a").length>0&&(D.push(t),F[t]=Array.from(e.querySelectorAll("a")))});let V=Array.from(f.querySelectorAll("#download-data a")),P=o.querySelector(".video-player-container-final iframe"),W=o.querySelector(".video-player-container-final"),R=o.querySelector(".video-overlay");R&&k&&(R.style.backgroundImage="url("+k+")"),R&&R.addEventListener("click",()=>{let e=document.getElementById("post-id");if(e){let t=e.getAttribute("data-post-id");t&&_(t)}W.classList.add("is-playing");let a=P.getAttribute("src");if(a&&"about:blank"!==a)try{let i=new URL(a);i.searchParams.set("autoplay","1"),P.setAttribute("src",i.href)}catch{P.setAttribute("src",a+(a.includes("?")?"&":"?")+"autoplay=1")}});let N="watchState_"+window.location.pathname,G=0,U=D[0]||null,O=localStorage.getItem(N);if(O)try{let Z=JSON.parse(O);if(Z&&D.includes(Z.server)){let K=F[Z.server]?.length||0;Z.episode<K&&(U=Z.server,G=Z.episode)}}catch(J){console.error("Could not parse saved watch state.",J)}let Y=o.querySelector(".server-selection-final"),Q=o.querySelector(".download-links-container"),X=o.querySelector("#reload-btn"),ee=o.querySelector("#fullscreen-btn"),et=o.querySelector("#sandbox-checkbox"),ea=o.querySelector("#prev-ep-btn"),ei=o.querySelector("#next-ep-btn"),en=o.querySelector("#ep-counter"),es=o.querySelector("#season-info"),el=D.length>0&&F[D[0]]?.length>0,er=D.length>1,eo=V.length>0;if(el||er||eo){o.querySelector("#episodes-section").style.display="block";let ed=o.querySelector(".episodes-tabs-final"),ec=o.querySelectorAll(".ep-tab-content"),e_=null;if(ed.innerHTML="",el&&(ed.innerHTML+='<button class="ep-tab-button" data-target="#episodes-content"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="16" height="16" fill="none">\n    <path d="M2 14C2 10.2288 2 8.34315 3.17157 7.17157C4.34315 6 6.22876 6 10 6H14C17.7712 6 19.6569 6 20.8284 7.17157C22 8.34315 22 10.2288 22 14C22 17.7712 22 19.6569 20.8284 20.8284C19.6569 22 17.7712 22 14 22H10C6.22876 22 4.34315 22 3.17157 20.8284C2 19.6569 2 17.7712 2 14Z" stroke-width="1.5" stroke-linecap="round"></path>\n    <path d="M9 3L12 6L16 2" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>\n</svg>Episodes</button>',e_||="#episodes-content"),er&&(ed.innerHTML+='<button class="ep-tab-button" data-target="#server-content"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="16" height="16" fill="none">\n    <path d="M19 4H5C4.06812 4 3.60218 4 3.23463 4.15224C2.74458 4.35523 2.35523 4.74458 2.15224 5.23463C2 5.60218 2 6.06812 2 7C2 7.93188 2 8.39782 2.15224 8.76537C2.35523 9.25542 2.74458 9.64477 3.23463 9.84776C3.60218 10 4.06812 10 5 10H19C19.9319 10 20.3978 10 20.7654 9.84776C21.2554 9.64477 21.6448 9.25542 21.8478 8.76537C22 8.39782 22 7.93188 22 7C22 6.06812 22 5.60218 21.8478 5.23463C21.6448 4.74458 21.2554 4.35523 20.7654 4.15224C20.3978 4 19.9319 4 19 4Z" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>\n    <path d="M19 14H5C4.06812 14 3.60218 14 3.23463 14.1522C2.74458 14.3552 2.35523 14.7446 2.15224 15.2346C2 15.6022 2 16.0681 2 17C2 17.9319 2 18.3978 2.15224 18.7654C2.35523 19.2554 2.74458 19.6448 3.23463 19.8478C3.60218 20 4.06812 20 5 20H19C19.9319 20 20.3978 20 20.7654 19.8478C21.2554 19.6448 21.6448 19.2554 21.8478 18.7654C22 18.3978 22 17.9319 22 17C22 16.0681 22 15.6022 21.8478 15.2346C21.6448 14.7446 21.2554 14.3552 20.7654 14.1522C20.3978 14 19.9319 14 19 14Z" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>\n    <path d="M6 17H6.01" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>\n    <path d="M10 17H10.01" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>\n    <path d="M6 7H6.01" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>\n    <path d="M10 7H10.01" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>\n</svg>Server<span class="tab-count">'+D.length+"</span></button>",e_||="#server-content"),eo&&(ed.innerHTML+='<button class="ep-tab-button" data-target="#download-content"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="18" height="18" fill="none">\n    <path d="M2.99969 17.0002C2.99969 17.9302 2.99969 18.3952 3.10192 18.7767C3.37932 19.8119 4.18796 20.6206 5.22324 20.898C5.60474 21.0002 6.06972 21.0002 6.99969 21.0002L16.9997 21.0002C17.9297 21.0002 18.3947 21.0002 18.7762 20.898C19.8114 20.6206 20.6201 19.8119 20.8975 18.7767C20.9997 18.3952 20.9997 17.9302 20.9997 17.0002" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>\n    <path d="M16.4998 11.5002C16.4998 11.5002 13.1856 16.0002 11.9997 16.0002C10.8139 16.0002 7.49976 11.5002 7.49976 11.5002M11.9997 15.0002V3.00016" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>\n</svg>Download</button>',e_||="#download-content"),e_&&(ed.querySelector('[data-target="'+e_+'"]').classList.add("active"),o.querySelector(e_).classList.add("active")),el?p(U):o.querySelector(".footer-group-middle").style.display="none",er&&m(),eo&&function(){Q.innerHTML="";let e=V.length;if(0===e)return;Q.innerHTML='<p class="total-ep-count">Total Files: '+e+"</p>";let t=document.createElement("div");t.className="download-grid-final",V.forEach(e=>{let a=document.createElement("a");a.href=e.href,a.className="ep-button",a.setAttribute("target","_blank"),a.textContent=e.textContent,t.appendChild(a)}),Q.appendChild(t)}(),ed.addEventListener("click",e=>{let t=e.target.closest(".ep-tab-button");if(t){ed.querySelector(".active")?.classList.remove("active"),t.classList.add("active"),ec.forEach(e=>e.classList.remove("active"));let a=t.dataset.target;o.querySelector(a).classList.add("active")}}),Y.addEventListener("click",e=>{if(e.target.matches(".server-btn")){let t=e.target.dataset.server;t!==U&&(p(t),m())}}),el){let e1=function(){let e=document.querySelector(".ep-range-dropdown-menu.is-open-globally");e&&e.classList.remove("is-open-globally"),window.removeEventListener("scroll",ep),e0=!1},ep=function(){e1()},e$=function(e,t){let a=e.getBoundingClientRect().bottom+8;t.style.top=a+"px",t.classList.add("is-open-globally"),e0||(window.addEventListener("scroll",ep,{once:!0}),e0=!0)};o.querySelector(".episodes-pagination-final");let e0=!1;document.body.addEventListener("click",function(e){let t=e.target.closest(".ep-range-dropdown-toggle"),a=e.target.closest(".ep-range-tab"),i=document.querySelector(".ep-range-dropdown-menu.is-open-globally");if(t){e.preventDefault(),e.stopPropagation();let n=t.nextElementSibling;n&&n.classList.contains("is-open-globally")?e1():n&&e$(t,n)}else if(a){e.preventDefault();let s=parseInt(a.dataset.page,10);e.target.closest(".ep-range-dropdown-menu")&&e1(),g(s),h(s)}else i&&!e.target.closest(".ep-range-dropdown")&&e1()}),o.querySelector(".episodes-grid-container-final").addEventListener("click",e=>{let t=e.target.closest(".ep-button");t&&(e.preventDefault(),u(parseInt(t.dataset.epIndex,10)))}),ea.addEventListener("click",()=>u(G-1)),ei.addEventListener("click",()=>u(G+1))}let em=o.querySelector("#comment-btn");em&&em.addEventListener("click",()=>{let e=document.querySelector("#comments");e&&e.scrollIntoView({behavior:"smooth"})}),X.addEventListener("click",()=>{P.src=P.src}),ee.addEventListener("click",()=>{P.requestFullscreen&&P.requestFullscreen()}),et.addEventListener("change",()=>{et.checked?P.setAttribute("sandbox","allow-scripts allow-same-origin"):P.removeAttribute("sandbox")});let eu=b("#extra-meta .meta-season");eu&&(es.textContent=eu),!el&&U&&(P.src=F[U][0].href)}else{let eg=f.querySelector("iframe");eg&&eg.src&&(P.src=eg.src),o.querySelector("#episodes-section").style.display="none",o.querySelector(".footer-group-middle").style.display="none"}let eh=o.querySelector(".info-modal-final"),ev=o.querySelector(".introduction-link-final"),ef=eh.querySelector(".modal-close-btn");if(ev&&eh&&ef){let e4=e=>{e.preventDefault(),window.innerWidth<=767?eh.classList.add("is-open-mobile"):eh.style.display="block"},e2=()=>{window.innerWidth<=767?eh.classList.remove("is-open-mobile"):eh.style.display="none"};ev.addEventListener("click",e4),ef.addEventListener("click",e2)}if(o.classList.add("loaded"),window.innerWidth<=767){let ey=document.querySelector(".player-column-final"),e3=document.querySelector("article.item-post");ey&&e3&&e3.prepend(ey)}}catch(e5){if(console.error("Error initializing custom player layout:",e5),document.querySelector(".item-post")){let e6=document.getElementById("source-data-container");e6&&(e6.style.display="block")}o&&(o.style.display="none")}try{var e7=decodeURIComponent(window.location.pathname),eb=document.querySelectorAll(".mobile-nav a"),ew=null;eb.forEach(function(e){var t=new URL(e.href).pathname;("/"===t&&"/"===e7||"/"!==t&&e7.startsWith(t)&&(!ew||t.length>new URL(ew.href).pathname.length))&&(ew=e)}),ew?ew.classList.add("active"):"/"===e7&&document.querySelector('.mobile-nav a[href="/"]').classList.add("active")}catch(ek){console.error("Error setting active mobile link:",ek)}}}),$(document).ready(function(){if($(document).on("click",".header-carousel-nav .header-nav-btn",function(){var e=$(this),t=$(e.data("target"));if(t.length){var a,i=t.data("owl.carousel");if(!i)return;var n=window.innerWidth;a=n<768?3:n<1024?4:6;var s=i.current();if(e.hasClass("prev")){var l=Math.max(0,s-a);t.trigger("to.owl.carousel",[l,300])}else if(e.hasClass("next")){var l=Math.min(i.items().length-a,s+a);t.trigger("to.owl.carousel",[l,300])}}}),window.innerWidth>1023&&$("body").hasClass("item-view")){let t=document.body;new MutationObserver((e,t)=>{let a=$("#comments"),i=$(".recommendation-section"),n=$(".most-popular-sidebar"),s=$(".post-page-final-container");if(a.length&&i.length&&n.length&&s.length&&!s.hasClass("layout-processed")){t.disconnect(),s.addClass("layout-processed"),a.detach(),i.detach(),n.detach();let l=$('<div class="post-footer-container"></div>'),r=$('<div class="post-footer-main-content"></div>');r.append(a),r.append(i),l.append(r),l.append(n),s.after(l),$("#video-tab-content .post-footer-container, #comment-tab-content .post-footer-container").remove()}}).observe(t,{childList:!0,subtree:!0})}function a(e){$(e+" .entry-image[data-image]").each(function(){var e=$(this).attr("data-image");e&&e.includes("googleusercontent")&&$(this).attr("data-image",e.replace(/\/(s|w|h)\d+(-[a-z0-9]+)*\//,"/s720/"))})}function i(){var e=$(window).width()+200,t=$(window).height()+200;$(".entry-image[data-image]:not(.lazyloaded)").each(function(){var a=$(this),i=a[0].getBoundingClientRect();i.width>0&&i.height>0&&i.top<t&&i.bottom>-200&&i.left<e&&i.right>-200&&a.css("background-image",'url("'+a.attr("data-image")+'")').addClass("lazyloaded")})}function n(e,t){e.closest(".widget").find(".widget-title .title").text().trim();var a=$.extend({maxResults:12,label:null,style:"nowrap",sortBy:null},t);let n=["Action","Action & Adventure","Adventure","Animation","Comedy","Crime","Documentary","Drama","Family","Fantasy","History","Horror","Kids","Music","Mystery","Reality","Romance","Sci-Fi & Fantasy","Science Fiction","Thriller","War","Western"];var s=e.closest(".widget");if("_auto_"===a.label&&!$("body").is(".item-view, .item-page")){s.hide();return}if(!a.label&&null!==a.label){e.html('<span class="error-msg">No category specified for this widget.</span>');return}var l="rating"===a.sortBy?50:a.maxResults,r="/feeds/posts/default"+(a.label?"/-/"+encodeURIComponent(a.label):"")+"?alt=json-in-script&max-results="+l;$.ajax({url:r,dataType:"jsonp",success:function(t){var s,l=t.feed&&t.feed.entry?t.feed.entry:[];if(0===l.length){e.html('<span class="error-msg">No posts found for this genre.</span>');return}let r=l.map(function(e){let t=document.createElement("div");t.innerHTML=e.content.$t;let a=$(t),i;return{id:e.id.$t.split(".post-")[1],label:(e.category||[]).map(e=>e.term).find(e=>n.includes(e))||"",link:(e.link.find(e=>"alternate"===e.rel)||{}).href,title:e.title.$t,imageUrl:(a.find('img[alt="poster"]').attr("src")||"https://resources.blogblog.com/img/blank.gif").replace(/\/s\d+(-[a-z0-g]+)*\//,"/s400-rw/"),rating:a.find("#extra-meta .meta-rating").text().trim(),type:a.find("#extra-meta .meta-type").text().trim(),year:a.find("#extra-meta .meta-year").text().trim(),synopsis:a.find("#overview-data").text().trim(),genres:a.find("#extra-meta .meta-genre").map(function(){return $(this).text().trim()}).get(),subtitles:a.find("#extra-meta .meta-subtitles").text().trim(),audio:a.find("#extra-meta .meta-audio").text().trim(),isMature:!!e.category&&e.category.some(e=>"Mature"===e.term)}}).filter(e=>e.link);"rating"===a.sortBy&&r.sort((e,t)=>parseFloat(t.rating||0)-parseFloat(e.rating||0));var d="";(r=r.slice(0,a.maxResults)).forEach(function(e,t){var i=t+1,n=e.label?'<span class="entry-label">'+e.label+"</span>":"";if("wide-list"===a.style){let s="";1===i?s="rank-gold":2===i?s="rank-blue":3===i&&(s="rank-green");var l=e.rating?'<span class="item-rating"><svg class="g-star" viewBox="0 0 24 24"><path d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"/></svg>'+e.rating+"</span>":"";let r="TV Series"===e.type?"TV":e.type;var o=e.type?'<span class="type-tag '+e.type.toLowerCase().replace(/\s+/g,"-")+'">'+r+"</span>":"",c=e.year?'<span class="item-year">'+e.year+"</span>":"",_=e.genres.slice(0,2).map(e=>'<span class="genre-tag">'+e+"</span>").join("");d+='<a class="wide-list-item" href="'+e.link+'" title="'+e.title+'"><div class="item-thumb"><img src="'+e.imageUrl+'" alt="'+e.title+'" loading="lazy"/><div class="rank-badge '+s+'">'+i+'</div></div><div class="item-info"><h4 class="item-title">'+e.title+'</h4><div class="item-meta-group">'+c+l+o+'</div><div class="item-genres">'+_+'</div><p class="item-synopsis">'+(e.synopsis||"")+"</p></div></a>"}else if("ranked-grid-alt"===a.style){var _=e.genres.slice(0,3).map(e=>'<span class="tag">'+e+"</span>").join("");d+='<div class="ranked-grid-alt-item"><a class="item-thumb" href="'+e.link+'" title="'+e.title+'"><img src="'+e.imageUrl+'" alt="'+e.title+'" loading="lazy"/></a><span class="rank-number">'+i+'</span><div class="item-info"><h4 class="item-title"><a href="'+e.link+'">'+e.title+'</a></h4><div class="item-tags">'+_+"</div></div></div>"}else if("top-list"===a.style){var l=e.rating?'<span class="item-rating">'+e.rating+"</span>":"",p=e.subtitles?'<span class="item-cc">CC '+e.subtitles+"</span>":"",m=e.audio?'<span class="item-audio"><svg viewBox="0 0 24 24" width="1em" height="1em" fill="currentColor" style="vertical-align: -2px; margin-right: 4px;"><path d="M12 14c1.66 0 2.99-1.34 2.99-3L15 5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3zm5.3-3c0 3-2.54 5.1-5.3 5.1S6.7 14 6.7 11H5c0 3.41 2.72 6.23 6 6.72V21h2v-3.28c3.28-.48 6-3.3 6-6.72h-1.7z"></path></svg>'+e.audio+"</span>":"",u=e.type&&e.type.toLowerCase().replace(/\s+/g,"-")||"movie",o=e.type?'<span class="type-tag '+u+'">'+e.type+"</span>":"";d+='<div class="top-list-item"><div class="rank-badge top-'+i+'">'+i+'</div><div class="item-info"><h4 class="item-title"><a href="'+e.link+'">'+e.title+'</a></h4><div class="item-footer">'+l+p+m+o+'</div></div><a class="item-thumb" href="'+e.link+'" title="'+e.title+'"><img src="'+e.imageUrl+'" alt="'+e.title+'" loading="lazy"/></a></div>'}else d+='<article class="index-post'+(e.isMature?" is-mature":"")+'" data-post-id="'+e.id+'"><a class="entry-image-wrap" href="'+e.link+'" title="'+e.title+'"><span class="entry-image" data-image="'+e.imageUrl+'"></span>'+n+'<div class="thumb-meta-overlay"><span class="thumb-meta thumb-duration"></span><span class="thumb-meta thumb-rating"></span></div></a><div class="entry-header"><h2 class="entry-title"><a href="'+e.link+'">'+e.title+'</a></h2><div class="card-sub-meta"><div class="sub-meta-left"><span class="sub-meta-type"></span><span class="sub-meta-year"></span></div><div class="sub-meta-right"><span class="sub-meta-cc"></span><span class="sub-meta-mic"></span></div></div></div></article>'});var c="abefilm-carousel-"+Math.random().toString(36).substring(2,9);s="nowrap"===a.style||"wide-list"===a.style?'<div class="index-post-wrap owl-carousel owl-theme entry-slider" id="'+c+'">'+d+"</div>":"grid"===a.style?'<div class="index-post-wrap">'+d+"</div>":"ranked-grid-alt"===a.style?'<div class="ranked-grid-alt-widget-content">'+d+"</div>":"top-list"===a.style?'<div class="top-list-widget-content">'+d+"</div>":'<div class="widget-content-inner">'+d+"</div>",e.html(s);let _={loop:!1,margin:16,nav:!0,dots:!1,slideBy:"page",navText:['<svg fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 18l-6-6 6-6"/></svg>','<svg fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 6l6 6-6 6"/></svg>'],responsive:{0:{autoWidth:!0,margin:8},768:{items:4,margin:16},1024:{items:6}}};"wide-list"===a.style&&(_.responsive={0:{items:1,margin:12,autoWidth:!0,stagePadding:60},768:{items:2,margin:16},1024:{items:3,margin:20}}),("nowrap"===a.style||"wide-list"===a.style)&&e.find(".owl-carousel").owlCarousel(_),i();var p=e.find(".owl-nav .owl-prev");p.length&&p.removeAttr("role").attr("aria-label","Previous");var m=e.find(".owl-nav .owl-next");m.length&&m.removeAttr("role").attr("aria-label","Next"),"function"==typeof o&&o()},error:function(){e.html('<span class="error-msg">Error: Feed could not be loaded.</span>')}})}function s(){$("#Blog1 .index-post:not(.meta-populated)").each(function(){var e,t=$(this),a=t.find("a.entry-image-wrap").attr("href");a&&(e=t,$.get(a,function(t){var a=$(t),i=a.find(".meta-rating").text().trim(),n=a.find(".meta-year").text().trim(),s=e.find(".entry-header .entry-meta");if((n||i)&&s.length){var l="";n&&(l+='<span class="entry-year">'+n+"</span>"),i&&(l+='<span class="entry-rating"><svg viewBox="0 0 24 24"><path d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"/></svg>'+i+"</span>"),s.html(l).addClass("loaded")}e.addClass("meta-populated")}))})}function l(e){var t=e.target;setTimeout(function(){var a=$(t).closest(".widget-content").find(".header-carousel-nav");e.item.count<=e.page.size?a.hide():a.show()},50)}function r(e,t){e.duration&&t.find(".thumb-duration").html('\n            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="20" height="20" fill="none" style="vertical-align: middle; margin-right: 4px;">\n                <path d="M2 15C2.14277 15.4274 2.31023 15.8431 2.50062 16.2452M4.12547 18.7463C4.44158 19.1137 4.781 19.4596 5.14137 19.7814M9 22C8.55224 21.8557 8.11701 21.6824 7.69641 21.4822" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />\n                <path d="M12 13.5C12.8284 13.5 13.5 12.8284 13.5 12C13.5 11.1716 12.8284 10.5 12 10.5C11.1716 10.5 10.5 11.1716 10.5 12M12 13.5C11.1716 13.5 10.5 12.8284 10.5 12M12 13.5V16M10.5 12H6" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" />\n                <path d="M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" />\n            </svg>\n        '+e.duration).addClass("is-visible"),e.rating&&t.find(".thumb-rating").html('\n            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="20" height="20" fill="none" style="vertical-align: middle; margin-right: 4px;">\n                <path d="M9.03658 10.8665L10.0925 12.9957C10.2364 13.2921 10.6204 13.5764 10.9444 13.6309L12.8582 13.9515C14.082 14.1571 14.37 15.0524 13.4881 15.9355L12.0003 17.4356C11.7483 17.6897 11.6103 18.1796 11.6883 18.5305L12.1142 20.3875C12.4502 21.8574 11.6763 22.426 10.3864 21.6578L8.59263 20.5871C8.26867 20.3935 7.73473 20.3935 7.40476 20.5871L5.61096 21.6578C4.3271 22.426 3.54719 21.8513 3.88315 20.3875L4.3091 18.5305C4.3871 18.1796 4.24911 17.6897 3.99714 17.4356L2.5093 15.9355C1.6334 15.0524 1.91537 14.1571 3.13923 13.9515L5.05302 13.6309C5.37099 13.5764 5.75494 13.2921 5.89893 12.9957L6.95481 10.8665C7.53075 9.71116 8.46665 9.71116 9.03658 10.8665Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>\n                <path d="M22 2L14 10M16 2L11 7M20 10L17 13" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path>\n            </svg>\n        '+e.rating).addClass("is-visible"),e.audio&&t.find(".sub-meta-mic").html('\n            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="20" height="20" fill="none" style="vertical-align: middle; margin-right: 4px;">\n                <path d="M17 11C17 13.7614 14.7614 16 12 16C9.23858 16 7 13.7614 7 11V7C7 4.23858 9.23858 2 12 2" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />\n                <path d="M20 11C20 15.4183 16.4183 19 12 19M12 19C7.58172 19 4 15.4183 4 11M12 19V22" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />\n                <path d="M14.3327 4.64612C15.5394 4.49594 16.4959 3.53944 16.6461 2.33267C16.6689 2.14999 16.8159 2 17 2C17.1841 2 17.3311 2.14999 17.3539 2.33267C17.5041 3.53944 18.4606 4.49594 19.6673 4.64612C19.85 4.66885 20 4.81591 20 5C20 5.1841 19.85 5.33115 19.6673 5.35388C18.4606 5.50406 17.5041 6.46056 17.3539 7.66733C17.3311 7.85001 17.1841 8 17 8C16.8159 8 16.6689 7.85001 16.6461 7.66733C16.4959 6.46056 15.5394 5.50406 14.3327 5.35388C14.15 5.33115 14 5.1841 14 5C14 4.81591 14.15 4.66885 14.3327 4.64612Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />\n            </svg>\n         '+e.audio).addClass("is-visible"),e.type&&t.find(".sub-meta-type").text("TV Series"===e.type?"TV":e.type).addClass("is-visible"),e.year&&t.find(".sub-meta-year").text(e.year).addClass("is-visible"),e.subtitles&&t.find(".sub-meta-cc").html("CC "+e.subtitles).addClass("is-visible")}function o(){$(".index-post:not(.custom-meta-populated)").each(function(){var e=$(this),t=e.find("a.entry-image-wrap").attr("href");if(!t){e.addClass("custom-meta-populated");return}var a=sessionStorage.getItem("meta_"+t);if(a){r(JSON.parse(a),e),e.addClass("custom-meta-populated");return}$.get(t,function(a){var i=$(a).find("#extra-meta"),n={year:i.find(".meta-year").text().trim(),duration:i.find(".meta-duration").text().trim(),subtitles:i.find(".meta-subtitles").text().trim(),audio:i.find(".meta-audio").text().trim(),type:i.find(".meta-type").text().trim(),rating:i.find(".meta-rating").text().trim()};sessionStorage.setItem("meta_"+t,JSON.stringify(n)),r(n,e),e.addClass("custom-meta-populated")}).fail(function(){e.addClass("custom-meta-populated")})})}!function e(){var t=$(".homepage-filter-buttons");if(t.length){var a=t.find(".scroll-area"),i=t.find(".prev-btn"),n=t.find(".next-btn");a.owlCarousel({loop:!1,margin:12,nav:!1,dots:!1,autoWidth:!0,slideBy:1}),n.on("click",function(){a.trigger("next.owl.carousel")}),i.on("click",function(){a.trigger("prev.owl.carousel")})}}(),!function(){let e=$("#HTML90");if(!e.length)return;let t=["Action","Action & Adventure","Adventure","Animation","Comedy","Crime","Documentary","Drama","Family","Fantasy","History","Horror","Kids","Music","Mystery","Reality","Romance","Sci-Fi & Fantasy","Science Fiction","Thriller","War","Western"],a=e.find("#random-posts-grid"),n=e.find("#random-posts-switch"),s=[];function l(){if(s.length<6){a.html("<p style='width:100%;text-align:center;font-size:14px;'>Not enough posts to display.</p>"),n.hide();return}!function e(t){for(let a=t.length-1;a>0;a--){let i=Math.floor(Math.random()*(a+1));[t[a],t[i]]=[t[i],t[a]]}}(s);let e=s.slice(0,6).map(e=>'\n            <article class="index-post" data-post-id="'+e.id+'">\n              <a class="entry-image-wrap" href="'+e.url+'" title="'+e.title+'">\n                <span class="entry-image" data-image="'+e.imageUrl+'"></span>\n                <span class="entry-label">'+e.label+'</span>\n                <div class="thumb-meta-overlay">\n                  <span class="thumb-meta thumb-duration">\n                    '+(e.duration?'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="20" height="20" fill="none" style="vertical-align: middle; margin-right: 4px;"><path d="M2 15C2.14277 15.4274 2.31023 15.8431 2.50062 16.2452M4.12547 18.7463C4.44158 19.1137 4.781 19.4596 5.14137 19.7814M9 22C8.55224 21.8557 8.11701 21.6824 7.69641 21.4822" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" /><path d="M12 13.5C12.8284 13.5 13.5 12.8284 13.5 12C13.5 11.1716 12.8284 10.5 12 10.5C11.1716 10.5 10.5 11.1716 10.5 12M12 13.5C11.1716 13.5 10.5 12.8284 10.5 12M12 13.5V16M10.5 12H6" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" /><path d="M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" /></svg>'+e.duration:"")+'\n                  </span>\n                  <span class="thumb-meta thumb-rating">\n                    '+(e.rating?'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="11" height="11" fill="none"><path d="M9.03658 10.8665L10.0925 12.9957C10.2364 13.2921 10.6204 13.5764 10.9444 13.6309L12.8582 13.9515C14.082 14.1571 14.37 15.0524 13.4881 15.9355L12.0003 17.4356C11.7483 17.6897 11.6103 18.1796 11.6883 18.5305L12.1142 20.3875C12.4502 21.8574 11.6763 22.426 10.3864 21.6578L8.59263 20.5871C8.26867 20.3935 7.73473 20.3935 7.40476 20.5871L5.61096 21.6578C4.3271 22.426 3.54719 21.8513 3.88315 20.3875L4.3091 18.5305C4.3871 18.1796 4.24911 17.6897 3.99714 17.4356L2.5093 15.9355C1.6334 15.0524 1.91537 14.1571 3.13923 13.9515L5.05302 13.6309C5.37099 13.5764 5.75494 13.2921 5.89893 12.9957L6.95481 10.8665C7.53075 9.71116 8.46665 9.71116 9.03658 10.8665Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path><path d="M22 2L14 10M16 2L11 7M20 10L17 13" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path></svg>'+e.rating:"")+'\n                  </span>\n                </div>\n              </a>\n              <div class="entry-header">\n                <h2 class="entry-title"><a href="'+e.url+'">'+e.title+'</a></h2>\n                <div class="card-sub-meta">\n                  <div class="sub-meta-left">\n                    <span class="sub-meta-type">'+(e.type?"TV Series"===e.type?"TV":e.type:"")+'</span>\n                    <span class="sub-meta-year">'+(e.year||"")+'</span>\n                  </div>\n                  <div class="sub-meta-right">\n                    <span class="sub-meta-cc">'+(e.subtitles?"CC "+e.subtitles:"")+'</span>\n                    <span class="sub-meta-mic">\n                      '+(e.audio?'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="10" height="10"><path d="M12 14c1.66 0 2.99-1.34 2.99-3L15 5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3zm5.3-3c0 3-2.54 5.1-5.3 5.1S6.7 14 6.7 11H5c0 3.41 2.72 6.23 6 6.72V21h2v-3.28c3.28-.48 6-3.3 6-6.72h-1.7z" fill="currentColor"/></svg>'+e.audio:"")+"\n                    </span>\n                  </div>\n                </div>\n              </div>\n            </article>\n        ").join("");a.html(e),i(),o()}let r=$(".sidebar-logo .logo-text").text().trim()||"ABEFILM",d="";for(let c=0;c<6;c++)d+='<div class="skeleton-post-item"><div class="skeleton-image-placeholder"><span class="skeleton-card-text">'+r+'</span></div><div class="skeleton-title-placeholder"></div></div>';a.html(d),n.hide(),new IntersectionObserver((e,i)=>{e.forEach(e=>{e.isIntersecting&&($.ajax({url:"/feeds/posts/default?alt=json-in-script&max-results=50",type:"get",dataType:"jsonp",success:function(e){if(!e.feed||!e.feed.entry){a.html("<p>Failed to load posts.</p>");return}s=e.feed.entry.map(function(e){let a=document.createElement("div");a.innerHTML=e.content.$t;let i=$(a),n=i.find("#extra-meta"),s=(e.category||[]).map(e=>e.term).find(e=>t.includes(e))||"";return{id:e.id.$t.split(".post-")[1],title:e.title.$t,url:e.link.find(e=>"alternate"===e.rel).href,imageUrl:(i.find('img[alt="poster"]').attr("src")||"x").replace(/\/s\d+(-[a-z0-9]+)*\//,"/w400-h600-c/"),label:s,rating:n.find(".meta-rating").text().trim(),year:n.find(".meta-year").text().trim(),duration:n.find(".meta-duration").text().trim(),subtitles:n.find(".meta-subtitles").text().trim(),audio:n.find(".meta-audio").text().trim(),type:n.find(".meta-type").text().trim()}}).filter(Boolean),l(),n.show()},error:function(){a.html("<p>Failed to load post feed.</p>")}}),i.unobserve(e.target))})},{rootMargin:"0px 0px 200px 0px"}).observe(e[0]),n.on("click",l)}();let d,c;d="abefilmUserWatchlist",c=$("#clear-watchlist-modal-overlay"),window.getWatchlist=()=>{try{let e=localStorage.getItem(d);if(e)return JSON.parse(e);return[]}catch{return[]}},window.saveWatchlist=e=>{localStorage.setItem(d,JSON.stringify(e))},window.addToWatchlist=e=>{let t=getWatchlist();t.some(t=>t.id===e.id)||(t.unshift(e),saveWatchlist(t))},window.removeFromWatchlist=e=>{saveWatchlist(getWatchlist().filter(t=>String(t.id)!==String(e)))},window.isItemInWatchlist=e=>!!e&&getWatchlist().some(t=>String(t.id)===String(e)),window.updateWatchlistBadge=()=>{let e=getWatchlist().length,t=$(".watchlist-badge");e>0?t.text(e).show():t.text("0").hide()},window.renderWatchlistPanel=async()=>{let e=getWatchlist(),t=$("#watchlist-items-list"),a=$("#watchlist-empty-message"),i=e.length,n=e.slice(0,4);if(t.empty(),$(".view-all-watchlist-link").remove(),0===n.length){a.show(),updateWatchlistBadge();return}a.hide(),t.html("<li>Loading...</li>");let s=await Promise.all(n.map(async e=>{try{let t=await fetch(e.url);if(!t.ok)return e;let a=await t.text(),i=document.createElement("div");i.innerHTML=a;let n=i.querySelector("span.slider-backdrop"),s=e.image;return n&&n.textContent.trim()&&(s=n.textContent.trim()),{...e,image:s}}catch(l){return console.warn("Failed to fetch details for "+e.title+":",l),e}}));t.empty(),s.forEach(e=>{let a='<li><a href="'+e.url+'" title="'+e.title+'"><img class="watchlist-item-image" src="'+e.image+'" alt="'+e.title+'" loading="lazy" width="90" height="50"/></a><a href="'+e.url+'" class="watchlist-item-title" title="'+e.title+'">'+e.title+'</a><button class="watchlist-delete-btn" data-id="'+e.id+'" title="Remove"><svg viewBox="0 0 24 24" width="18" height="18" fill="none"><path d="M19.5 5.5L19.0982 12.0062M4.5 5.5L5.10461 15.5248C5.25945 18.0922 5.33688 19.3759 5.97868 20.299C6.296 20.7554 6.7048 21.1407 7.17905 21.4302C7.85035 21.84 8.68108 21.9631 10 22" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/><path d="M20 15L13 21.9995M20 22L13 15.0005" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/><path d="M3 5.5H21M16.0557 5.5L15.3731 4.09173C14.9196 3.15626 14.6928 2.68852 14.3017 2.39681C13.5939 2 13.0741 2 12.0345 2C10.9688 2 10.436 2 9.99568 2.23412C9.32164 2.7167 9.10063 3.20155 8.65861 4.17126L8.05292 5.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/></svg></button></li>';t.append(a)}),i>4&&t.after('<a class="view-all-watchlist-link" href="/p/watchlist.html">See All <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" fill="currentColor" viewBox="0 0 16 16" style="vertical-align: middle;"><path fill-rule="evenodd" d="M4.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L10.293 8 4.646 2.354a.5.5 0 0 1 0-.708z"/></svg></a>'),updateWatchlistBadge()},window.updateButtonState=e=>{if(!e||!e.length)return;let t=isItemInWatchlist(e.attr("data-post-id")),a=e.hasClass("post-page-add-btn"),i=e.closest("#preview-popup").length>0,n=e.hasClass("slider-btn");a?e.html((t?'<svg viewBox="0 0 24 24"><path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"></path></svg>':'<svg viewBox="0 0 24 24"><path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"></path></svg>')+"<span>"+(t?"Added":"Add to List")+"</span>"):i?e.html(t?'<svg viewBox="0 0 60 60"><circle fill="#fff" cx="30" cy="30" r="30"></circle><path d="M29.3,17.25C29.7,17.25,30,17.56,30,17.94V19.38C30,19.77,29.7,20.08,29.3,20.08H22.91V39.72L28.64,34.95C29.37,34.34,30.41,34.3,31.18,34.82L37.08,39.72V33.52C37.08,33.14,37.39,32.83,37.77,32.83H39.22C39.6,32.83,39.91,33.14,39.91,33.52V41.23C39.91,42.41,38.96,43.36,37.79,43.36C37.36,43.36,36.95,43.23,36.6,42.99L30,37.5L23.56,42.87C22.72,43.57,21.49,43.51,20.72,42.75C20.3,42.27,20.13,41.87,20.08,41.23V20.08C20.08,18.58,21.23,17.36,22.7,17.25H29.3Z" fill="#111319" fill-rule="nonzero"></path><path d="M33 23L37 27L44 18" stroke="#111319" stroke-width="3" fill="none" stroke-linecap="round" stroke-linejoin="round"></path></svg>':'<svg width="60px" height="60px" viewBox="0 0 60 60"><g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><circle fill="#FFFFFF" cx="30" cy="30" r="30"></circle><path d="M29.3055556,17.25 C29.6890866,17.25 30,17.5609134 30,17.9444444 L30,19.3888889 C30,19.77242 29.6890866,20.0833333 29.3055556,20.0833333 L22.9166667,20.0833333 L22.9166667,39.724 L28.6396082,34.9562398 C29.3713667,34.346441 30.4106369,34.302884 31.1863257,34.8255686 L31.3603918,34.9562398 L37.0833333,39.7254167 L37.0833333,33.5277778 C37.0833333,33.1442467 37.3942467,32.8333333 37.7777778,32.8333333 L39.2222222,32.8333333 C39.6057533,32.8333333 39.9166667,33.1442467 39.9166667,33.5277778 L39.9166667,41.2376789 C39.9166667,42.4112764 38.9652794,43.3627321 37.7916667,43.3627321 C37.3655561,43.3627321 36.9510168,43.2346313 36.6007867,42.9976358 L36.4312748,42.8701491 L30,37.50975 L23.5687252,42.8701491 C22.7234861,43.574515 21.4929682,43.5114751 20.7233835,42.7579578 L20.5758631,42.5980707 C20.3030814,42.2707327 20.1360669,41.8703014 20.0939154,41.4495208 L20.0833333,41.2376789 L20.0833333,20.0833333 C20.0833333,18.5896541 21.2391602,17.3659327 22.7052117,17.2577715 L22.9166667,17.25 L29.3055556,17.25 Z M39.2222222,17.25 C39.6057533,17.25 39.9166667,17.5609134 39.9166667,17.9444444 L39.9163333,21.499 L43.4722222,21.5 C43.8557533,21.5 44.1666667,21.8109134 44.1666667,22.1944444 L44.1666667,23.6388889 C44.1666667,24.02242 43.8557533,24.3333333 43.4722222,24.3333333 L39.9163333,24.333 L39.9166667,27.8888889 C39.9166667,28.27242 39.6057533,28.5833333 39.2222222,28.5833333 L37.7777778,28.5833333 C37.3942467,28.5833333 37.0833333,28.27242 37.0833333,27.8888889 L37.0823333,24.333 L33.5277778,24.3333333 C33.1442467,24.3333333 32.8333333,24.02242 32.8333333,23.6388889 L32.8333333,22.1944444 C32.8333333,21.8109134 33.1442467,21.5 33.5277778,21.5 L37.0823333,21.499 L37.0833333,17.9444444 C37.0833333,17.5609134 37.3942467,17.25 37.7777778,17.25 L39.2222222,17.25 Z" fill="#111319" fill-rule="nonzero"></path></g></svg>'):n&&e.html(t?'<svg viewBox="0 0 60 60"><circle fill="#fff" cx="30" cy="30" r="30"></circle><path d="M29.3,17.25C29.7,17.25,30,17.56,30,17.94V19.38C30,19.77,29.7,20.08,29.3,20.08H22.91V39.72L28.64,34.95C29.37,34.34,30.41,34.3,31.18,34.82L37.08,39.72V33.52C37.08,33.14,37.39,32.83,37.77,32.83H39.22C39.6,32.83,39.91,33.14,39.91,33.52V41.23C39.91,42.41,38.96,43.36,37.79,43.36C37.36,43.36,36.95,43.23,36.6,42.99L30,37.5L23.56,42.87C22.72,43.57,21.49,43.51,20.72,42.75C20.3,42.27,20.13,41.87,20.08,41.23V20.08C20.08,18.58,21.23,17.36,22.7,17.25H29.3Z" fill="#111319" fill-rule="nonzero"></path><path d="M33 23L37 27L44 18" stroke="#111319" stroke-width="3" fill="none" stroke-linecap="round" stroke-linejoin="round"></path></svg>':'<svg width="60px" height="60px" viewBox="0 0 60 60"><g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><circle fill="#FFFFFF" cx="30" cy="30" r="30"></circle><path d="M29.3055556,17.25 C29.6890866,17.25 30,17.5609134 30,17.9444444 L30,19.3888889 C30,19.77242 29.6890866,20.0833333 29.3055556,20.0833333 L22.9166667,20.0833333 L22.9166667,39.724 L28.6396082,34.9562398 C29.3713667,34.346441 30.4106369,34.302884 31.1863257,34.8255686 L31.3603918,34.9562398 L37.0833333,39.7254167 L37.0833333,33.5277778 C37.0833333,33.1442467 37.3942467,32.8333333 37.7777778,32.8333333 L39.2222222,32.8333333 C39.6057533,32.8333333 39.9166667,33.1442467 39.9166667,33.5277778 L39.9166667,41.2376789 C39.9166667,42.4112764 38.9652794,43.3627321 37.7916667,43.3627321 C37.3655561,43.3627321 36.9510168,43.2346313 36.6007867,42.9976358 L36.4312748,42.8701491 L30,37.50975 L23.5687252,42.8701491 C22.7234861,43.574515 21.4929682,43.5114751 20.7233835,42.7579578 L20.5758631,42.5980707 C20.3030814,42.2707327 20.1360669,41.8703014 20.0939154,41.4495208 L20.0833333,41.2376789 L20.0833333,20.0833333 C20.0833333,18.5896541 21.2391602,17.3659327 22.7052117,17.2577715 L22.9166667,17.25 L29.3055556,17.25 Z M39.2222222,17.25 C39.6057533,17.25 39.9166667,17.5609134 39.9166667,17.9444444 L39.9163333,21.499 L43.4722222,21.5 C43.8557533,21.5 44.1666667,21.8109134 44.1666667,22.1944444 L44.1666667,23.6388889 C44.1666667,24.02242 43.8557533,24.3333333 43.4722222,24.3333333 L39.9163333,24.333 L39.9166667,27.8888889 C39.9166667,28.27242 39.6057533,28.5833333 39.2222222,28.5833333 L37.7777778,28.5833333 C37.3942467,28.5833333 37.0833333,28.27242 37.0833333,27.8888889 L37.0823333,24.333 L33.5277778,24.3333333 C33.1442467,24.3333333 32.8333333,24.02242 32.8333333,23.6388889 L32.8333333,22.1944444 C32.8333333,21.8109134 33.1442467,21.5 33.5277778,21.5 L37.0823333,21.499 L37.0833333,17.9444444 C37.0833333,17.5609134 37.3942467,17.25 37.7777778,17.25 L39.2222222,17.25 Z" fill="#111319" fill-rule="nonzero"></path></g></svg>'),e.toggleClass("added",t)},window.initializeAllButtonStates=()=>{$(".add-list-btn, .slider-btn.add-btn, #preview-popup .watchlist-btn").each(function(){updateButtonState($(this))})},$(document).on("click",".add-list-btn, .slider-btn.add-btn, #preview-popup .watchlist-btn",function(e){e.preventDefault();let t=$(this),a={id:t.attr("data-post-id"),title:t.attr("data-post-title"),url:t.attr("data-post-url"),image:t.attr("data-post-image")};a.id&&a.title&&(isItemInWatchlist(a.id)?removeFromWatchlist(a.id):addToWatchlist(a),$('[data-post-id="'+a.id+'"]').each(function(){updateButtonState($(this))}),updateWatchlistBadge())}),$("#watchlist-items-list").on("click",".watchlist-delete-btn",function(e){e.stopPropagation(),removeFromWatchlist($(this).data("id")),renderWatchlistPanel(),initializeAllButtonStates()}),$("#clear-watchlist-btn").on("click",function(e){e.preventDefault(),e.stopPropagation(),getWatchlist().length>0&&c.addClass("is-visible")}),$("#confirm-clear-btn").on("click",function(){saveWatchlist([]),renderWatchlistPanel(),initializeAllButtonStates(),c.removeClass("is-visible")}),$("#cancel-clear-btn, #clear-watchlist-modal-overlay").on("click",function(e){e.target===this&&c.removeClass("is-visible")}),$(document).on("abefilm:preview_shown",function(e,t){updateButtonState(t.$button)}),initializeAllButtonStates();let _;_=$("#clear-watchlist-modal-overlay"),window.updateHistoryBadge=()=>{let e=JSON.parse(localStorage.getItem("watchHistoryIDs")||"[]").length,t=$(".history-badge");e>0?t.text(e).css("display","flex"):t.hide()},window.displayHistory=async()=>{let e=$("#history-items-list"),t=$("#history-empty-message");if(!e.length)return;let a=JSON.parse(localStorage.getItem("watchHistoryIDs")||"[]"),i=a.length,n=a.slice(0,4),s=JSON.parse(localStorage.getItem("abefilmWatchProgress")||"{}");if(0===n.length){e.empty(),t.show(),$(".view-all-history-link").remove();return}t.hide(),e.html("<li>Loading...</li>");let l=window.location.origin,r={};await Promise.all(n.map(e=>fetch(l+"/feeds/posts/default/"+e+"?alt=json").then(e=>e.ok?e.json():null).then(t=>{if(t&&t.entry){let a=t.entry,i=document.createElement("div");i.innerHTML=a.content.$t;let n=i.querySelector("span.slider-backdrop"),s=i.querySelector('img[alt="poster"]'),l=n&&n.textContent.trim()||s&&s.src||"x",o=i.querySelector("#episodes-data ul[data-server-name]");r[e]={title:a.title.$t,link:a.link.find(e=>"alternate"===e.rel).href,thumb:l,totalEpisodes:o?o.querySelectorAll("a").length:0}}}).catch(t=>console.warn("Failed to fetch post "+e,t))));let o="";n.forEach(e=>{let t=r[e];if(t){let a="";if(t.totalEpisodes>0){let i=(s["post-"+e]||0)+1;a='<div class="history-item-progress-info"><span class="ep-current">EP '+i+'</span><span class="ep-count"><span class="current">'+i+"</span> / "+t.totalEpisodes+'</span></div><div class="progress-bar-container"><div class="progress-bar-fill" style="width: '+i/t.totalEpisodes*100+'%;"></div></div>'}o+='<li id="history-item-'+e+'"><a href="'+t.link+'" title="'+t.title+'"><img class="watchlist-item-image" src="'+t.thumb+'" alt="'+t.title+'" loading="lazy"/></a><div class="history-item-details"><a href="'+t.link+'" class="watchlist-item-title" title="'+t.title+'">'+t.title+"</a>"+a+'</div><button class="watchlist-delete-btn" data-id="'+e+'"><svg viewBox="0 0 24 24" width="18" height="18" fill="none"><path d="M19.5 5.5L19.0982 12.0062M4.5 5.5L5.10461 15.5248C5.25945 18.0922 5.33688 19.3759 5.97868 20.299C6.296 20.7554 6.7048 21.1407 7.17905 21.4302C7.85035 21.84 8.68108 21.9631 10 22" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/><path d="M20 15L13 21.9995M20 22L13 15.0005" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/><path d="M3 5.5H21M16.0557 5.5L15.3731 4.09173C14.9196 3.15626 14.6928 2.68852 14.3017 2.39681C13.5939 2 13.0741 2 12.0345 2C10.9688 2 10.436 2 9.99568 2.23412C9.32164 2.7167 9.10063 3.20155 8.65861 4.17126L8.05292 5.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/></svg></button></li>'}}),e.html(o||""),e.html().trim()||t.show(),$(".view-all-history-link").remove(),i>4&&e.after('<a class="view-all-history-link" href="/p/history.html">See All <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" fill="currentColor" viewBox="0 0 16 16" style="vertical-align: middle;"><path fill-rule="evenodd" d="M4.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L10.293 8 4.646 2.354a.5.5 0 0 1 0-.708z"/></svg></a>')},$("#history-items-list").on("click",".watchlist-delete-btn",function(e){e.stopPropagation(),window.removeFromHistory($(this).data("id"))}),$("#clear-history-btn").on("click",function(e){if(e.preventDefault(),e.stopPropagation(),JSON.parse(localStorage.getItem("watchHistoryIDs")||"[]").length>0){var t;t=()=>{localStorage.setItem("watchHistoryIDs","[]"),displayHistory(),updateHistoryBadge()},_.find("h3").text("Clear History"),_.find("p").text("Are you sure you want to clear your viewing history?"),$("#confirm-clear-btn").off("click").on("click",()=>{t(),_.removeClass("is-visible")}),_.addClass("is-visible")}}),function(){!function e(){$("select.goog-te-combo").length>0?function e(){let t=$(".language-btn"),a=$("#langMenu");if(!t.length||!a.length)return;let i=[{code:"af",name:"Afrikaans",country:"za"},{code:"sq",name:"Albanian",country:"al"},{code:"ar",name:"Arabic",country:"sa"},{code:"hy",name:"Armenian",country:"am"},{code:"az",name:"Azerbaijani",country:"az"},{code:"eu",name:"Basque",country:"es"},{code:"be",name:"Belarusian",country:"by"},{code:"bn",name:"Bengali",country:"bd"},{code:"bs",name:"Bosnian",country:"ba"},{code:"bg",name:"Bulgarian",country:"bg"},{code:"ca",name:"Catalan",country:"es"},{code:"zh-CN",name:"Chinese (Simplified)",country:"cn"},{code:"zh-TW",name:"Chinese (Traditional)",country:"tw"},{code:"hr",name:"Croatian",country:"hr"},{code:"cs",name:"Czech",country:"cz"},{code:"da",name:"Danish",country:"dk"},{code:"nl",name:"Dutch",country:"nl"},{code:"en",name:"English",country:"us"},{code:"et",name:"Estonian",country:"ee"},{code:"tl",name:"Filipino",country:"ph"},{code:"fi",name:"Finnish",country:"fi"},{code:"fr",name:"French",country:"fr"},{code:"gl",name:"Galician",country:"es"},{code:"ka",name:"Georgian",country:"ge"},{code:"de",name:"German",country:"de"},{code:"el",name:"Greek",country:"gr"},{code:"gu",name:"Gujarati",country:"in"},{code:"ht",name:"Haitian Creole",country:"ht"},{code:"iw",name:"Hebrew",country:"il"},{code:"hi",name:"Hindi",country:"in"},{code:"hu",name:"Hungarian",country:"hu"},{code:"is",name:"Icelandic",country:"is"},{code:"id",name:"Indonesian",country:"id"},{code:"ga",name:"Irish",country:"ie"},{code:"it",name:"Italian",country:"it"},{code:"ja",name:"Japanese",country:"jp"},{code:"kn",name:"Kannada",country:"in"},{code:"ko",name:"Korean",country:"kr"},{code:"la",name:"Latin",country:"va"},{code:"lv",name:"Latvian",country:"lv"},{code:"lt",name:"Lithuanian",country:"lt"},{code:"mk",name:"Macedonian",country:"mk"},{code:"ms",name:"Malay",country:"my"},{code:"mt",name:"Maltese",country:"mt"},{code:"no",name:"Norwegian",country:"no"},{code:"fa",name:"Persian",country:"ir"},{code:"pl",name:"Polish",country:"pl"},{code:"pt",name:"Portuguese",country:"pt"},{code:"ro",name:"Romanian",country:"ro"},{code:"ru",name:"Russian",country:"ru"},{code:"sr",name:"Serbian",country:"rs"},{code:"sk",name:"Slovak",country:"sk"},{code:"sl",name:"Slovenian",country:"si"},{code:"es",name:"Spanish",country:"es"},{code:"sw",name:"Swahili",country:"ke"},{code:"sv",name:"Swedish",country:"se"},{code:"ta",name:"Tamil",country:"in"},{code:"te",name:"Telugu",country:"in"},{code:"th",name:"Thai",country:"th"},{code:"tr",name:"Turkish",country:"tr"},{code:"uk",name:"Ukrainian",country:"ua"},{code:"ur",name:"Urdu",country:"pk"},{code:"vi",name:"Vietnamese",country:"vn"},{code:"cy",name:"Welsh",country:"gb"},{code:"yi",name:"Yiddish",country:"il"}];t.on("click",function(e){e.preventDefault(),e.stopPropagation();let t;(t=$("#langList")).children().length>0||i.forEach(e=>{let i=$('<li><a href="#"><img class="flag-icon"/><span></span></a></li>');i.find("span").text(e.name),i.find("a").on("click",function(t){t.preventDefault();var i,n=$("select.goog-te-combo");n.length&&(n.val(e.code),document.createEvent?((i=document.createEvent("HTMLEvents")).initEvent("change",!0,!0),n[0].dispatchEvent(i)):((i=document.createEventObject()).eventType="change",n[0].fireEvent("on"+i.eventType,i))),a.removeClass("lang-menu-visible")}),t.append(i)}),a.toggleClass("lang-menu-visible")}),$("#langSearch").on("input",function(){let e=$(this).val().toLowerCase();$("#langList li").each(function(){$(this).css("display",$(this).text().toLowerCase().includes(e)?"":"none")})}),$(document).on("click",function(e){$(e.target).closest(".language-btn, .language-dropdown-menu").length||a.removeClass("lang-menu-visible")})}():setTimeout(e,150)}();let e=setInterval(function(){let t=document.querySelector(".goog-te-gadget-icon");if(t){t.style.display="none",t.style.visibility="hidden";let a=t.parentElement;a&&a.classList.contains("skiptranslate")&&(a.style.display="none",a.style.visibility="hidden"),clearInterval(e)}},200),t,a;t=$(".notification-badge, .mobile-notification-badge"),(a=$("#header-notifications .noti-item").length)>0?t.text(a).show():t.hide();var i=$(".head-container, .mobile-header-container");function n(){i.toggleClass("scrolled",$(window).scrollTop()>50)}if(n(),$(window).on("scroll",n),window.innerWidth>1023){let s=function(e){if(!e.hasClass("continue-watching-item")){var t=e.find("a").attr("href");if(t){_&&_.abort(),new URL(t).pathname;var a=e[0].getBoundingClientRect(),i=window.scrollX+a.left+a.width/2-d.width()/2,n=window.scrollY+a.top+a.height/2-d.height()/2;i<10&&(i=10),i+d.width()>$(window).width()-10&&(i=$(window).width()-d.width()-10),d.addClass("loading").css({top:n+"px",left:i+"px",display:"block"}).addClass("visible"),d.off("click.cardnav"),d.on("click.cardnav",function(e){if($(e.target).closest(".action-buttons, .more-info-link").length>0)return;let t=$("#preview-more-link").attr("href");t&&"#"!==t&&(window.location.href=t)}),d.data("current-url")!==t?($("#preview-title, #preview-synopsis, #preview-rating, #preview-year, #preview-genres").empty(),$("#preview-image").css("background-image",""),_=$.get(t,function(a){if(c&&c.is(e)){var i=$("<div/>").html(a),n=i.find("#extra-meta"),s=i.find("span.slider-backdrop").text().trim(),l=i.find('img[alt="poster"]').attr("src"),r=i.find(".entry-title").text().trim(),o=i.find(".post-body p").first().text().trim(),_=n.find(".meta-rating").text().trim(),p=n.find(".meta-year").text().trim(),m=n.find(".meta-genre").map(function(){return $(this).text().trim()}).get(),u=$("#preview-popup .watchlist-btn");_&&$("#preview-rating").html('\n                <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" fill="currentColor" viewBox="0 0 16 16" style="vertical-align: text-bottom; margin-right: 4px;">\n                    <path d="M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L.173 6.765c-.329-.314-.158-.888.283-.95l4.898-.696L7.538.792c.197-.39.73-.39.927 0l2.184 4.327 4.898.696c.441.062.612.636.282.95l-3.522 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z"/>\n                </svg> \n            '+_),u.attr({"data-post-id":e.data("post-id"),"data-post-title":r,"data-post-url":t,"data-post-image":s||l}),$("#preview-image").css("background-image","url("+(s||l)+")"),$("#preview-title").text(r),$("#preview-synopsis").text(o),$("#preview-year").text(p),$("#preview-genres").html(m.map(e=>'<span class="genre-tag">'+e+"</span>").join("")),$("#preview-play-btn, #preview-more-link").attr("href",t),d.data("current-url",t).removeClass("loading"),$(document).trigger("abefilm:preview_shown",{$button:u})}}).fail(function(e,t){"abort"!==t&&l()})):(d.removeClass("loading"),$(document).trigger("abefilm:preview_shown",{$button:$("#preview-popup .watchlist-btn")}))}}},l=function(){clearTimeout(r),clearTimeout(o),d.removeClass("visible"),setTimeout(function(){c||d.hide().removeClass("loading").data("current-url","")},200)};var r,o,d=$("#preview-popup"),c=null,_=null;$("body").on("mouseenter",".index-post, #preview-popup",function(){if(clearTimeout(o),$(this).hasClass("index-post")){var e=$(this);c=e,r=setTimeout(function(){c&&c.is(e)&&s(e)},400)}}),$("body").on("mouseleave",".index-post, #preview-popup",function(){clearTimeout(r),o=setTimeout(l,200)}),$(document).on("mouseover",function(e){$(e.target).closest(".index-post, .preview-card-popup").length||(c=null,l())})}let p=$(".head-widget .BlogSearch input"),m=$("#search-suggestions-container"),u="bloggerSearchHistory",g="bloggerPopularCache",h=null,v=()=>{m.empty().show(),k(),C()},f=()=>{m.hide()},y=e=>{$.ajax({url:"/feeds/posts/default?alt=json-in-script&q="+encodeURIComponent(e)+"&max-results=10",type:"get",dataType:"jsonp",success:function(t){let a=t.feed.entry||[];if(m.empty().show(),0===a.length){m.html('<div class="suggestion-item no-results">No results</div>');return}m.append('<ul class="suggestions-list">'+a.map(t=>{let a=t.title.$t,i=a.toLowerCase().indexOf(e.toLowerCase()),n=a;if(-1!==i){let s=a.substring(i,i+e.length);n=a.substring(0,i)+"<strong>"+s+"</strong>"+a.substring(i+e.length)}return'<li class="suggestion-item"><a href="'+t.link.find(e=>"alternate"===e.rel).href+'">'+n+"</a></li>"}).join("")+"</ul>")},error:function(){m.html('<div class="no-results">Error</div>')}})},b=()=>JSON.parse(localStorage.getItem(u))||[],w=e=>{if(!e.trim())return;let t=b().filter(t=>t.toLowerCase()!==e.toLowerCase());t.unshift(e),t.length>3&&(t.length=3),localStorage.setItem(u,JSON.stringify(t))},k=()=>{let e=b();e.length>0&&m.append('<div class="suggestions-header"><span>Search history</span><span class="delete-all-icon" title="Clear"><svg viewBox="0 0 24 24"><path d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"></path></svg></span></div><ul class="suggestions-list">'+e.map(e=>'<li class="suggestion-item history-item"><a href="/search?q='+encodeURIComponent(e)+'" class="history-item-text">'+e+'</a><span class="remove-history-item" data-term="'+e+'">&#10005;</span></li>').join("")+"</ul>")},C=()=>{let e=sessionStorage.getItem(g);if(e){let t=JSON.parse(e);if(Date.now()-t.timestamp<9e5){L(t.html);return}}$.ajax({url:"/feeds/posts/default?alt=json-in-script&max-results=7",type:"get",dataType:"jsonp",success:function(e){if(!e.feed.entry||0===e.feed.entry.length)return;let t='<div class="suggestions-header"><span>\uD83D\uDD25 Latest Posts</span></div><ul class="suggestions-list">'+e.feed.entry.map((e,t)=>'<li class="suggestion-item popular-item"><a href="'+e.link.find(e=>"alternate"===e.rel).href+'"><span class="popular-rank '+(t<3?"top-3":"")+'">'+(t+1)+'</span><span class="popular-title">'+e.title.$t+"</span></a></li>").join("")+"</ul>";sessionStorage.setItem(g,JSON.stringify({html:t,timestamp:Date.now()})),L(t)}})},L=e=>{b().length>0&&m.append('<div class="suggestions-divider"></div>'),m.append(e)};p.on("focus",v).on("keyup",function(){let e=$(this).val().trim();if(clearTimeout(h),e.length<2){v();return}h=setTimeout(()=>y(e),300)}),$(document).on("click",function(e){$(e.target).closest(".BlogSearch").length||f()}),$(".head-widget .BlogSearch form").on("submit",function(){w(p.val())}),m.on("click",".remove-history-item",function(e){e.stopPropagation();let t=b().filter(e=>e!==$(this).data("term"));localStorage.setItem(u,JSON.stringify(t)),v()}),m.on("click",".delete-all-icon",function(e){e.stopPropagation(),localStorage.removeItem(u),v()}),$(document).on("click",function(e){let t=$(e.target),a=t.closest("[data-panel-target]");if(!a.length&&!t.closest(".header-dropdown-panel").length){$(".header-dropdown-panel").removeClass("is-visible");return}if(a.length){e.preventDefault(),e.stopPropagation();let i=a.data("panel-target"),n=$(i),s=n.hasClass("is-visible");$(".header-dropdown-panel").removeClass("is-visible"),s||(n.addClass("is-visible"),"#notification-panel"===i&&$("#notification-panel-content").html($("#header-notifications").html()))}}),setTimeout(function e(){var t=$("#celebrity-carousel-widgets"),a=$(".celebrity-carousel-wrapper"),i=t.find(".widget.Image");if(i.length>0){var n=$('<div class="owl-carousel owl-theme" id="celebrity-carousel"></div>');if(i.each(function(){var e=$(this),t=e.find(".data-title").text().trim(),a=e.find(".data-caption").text().trim(),i=e.find("img").attr("src"),s=e.find("a").attr("href");i&&n.append('<div class="celebrity-item"><a href="'+(s||"#")+'"><img class="celebrity-image" src="'+i.replace(/\/s\d+(-[a-z0-9]+)*\//,"/s150-c/")+'" alt="'+t+'" loading="lazy" width="100" height="100"/><span class="celebrity-name">'+t+"</span>"+(a?'<span class="celebrity-role">'+a+"</span>":"")+"</a></div>")}),n.children().length>0){a.empty().append(n),n.owlCarousel({loop:!1,margin:16,nav:!0,dots:!1,navText:['<svg viewBox="0 0 16 16"><path d="M11.354 1.646a.5.5 0 0 1 0 .708L5.707 8l5.647 5.646a.5.5 0 0 1-.708.708l-6-6a.5.5 0 0 1 0-.708l6-6a.5.5 0 0 1 .708 0z"/></svg>','<svg viewBox="0 0 16 16"><path d="M4.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L10.293 8 4.646 2.354a.5.5 0 0 1 0-.708z"/></svg>'],responsive:{0:{items:3,margin:12},480:{items:4},768:{items:6},1024:{items:8}}});var s=a.find(".owl-nav .owl-prev");s.length&&s.removeAttr("role").attr("aria-label","Previous items");var l=a.find(".owl-nav .owl-next");l.length&&l.removeAttr("role").attr("aria-label","Next items")}}},200)}(),function e(){var t=decodeURIComponent(window.location.pathname);if("/"===t){$('#main-menu #LinkList1 .tm-channel a[href="/"]').addClass("menu_0");return}$("#main-menu #LinkList1 .tm-channel a").each(function(){var e=$(this).attr("href");"/"!==e&&t===e?$(this).addClass("menu_0"):$(this).removeClass("menu_0")})}(),"object"==typeof blogger&&blogger.widgets&&blogger.widgets.makePostsExpandable&&blogger.widgets.makePostsExpandable(),"undefined"!=typeof _WidgetManager&&_WidgetManager.init&&_WidgetManager.init(),e(),function e(){let t=$("#dynamic-main-slider");if(!t.length)return;let a=null,i=window.location.pathname;if(i.startsWith("/search/label/")&&(a=decodeURIComponent(i.split("/search/label/")[1].replace(/\/$/,""))),"/"!==i&&!a){t.closest(".content-slider").hide();return}let n=a?"slider_cache_"+a:"slider_cache_homepage",s=a?"/feeds/posts/default/-/"+encodeURIComponent(a)+"?alt=json-in-script&max-results=5":"/feeds/posts/default?alt=json-in-script&max-results=5",l='<svg width="60px" height="60px" viewBox="0 0 60 60"><g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><circle fill="#FFFFFF" cx="30" cy="30" r="30"></circle><path d="M29.3055556,17.25 C29.6890866,17.25 30,17.5609134 30,17.9444444 L30,19.3888889 C30,19.77242 29.6890866,20.0833333 29.3055556,20.0833333 L22.9166667,20.0833333 L22.9166667,39.724 L28.6396082,34.9562398 C29.3713667,34.346441 30.4106369,34.302884 31.1863257,34.8255686 L31.3603918,34.9562398 L37.0833333,39.7254167 L37.0833333,33.5277778 C37.0833333,33.1442467 37.3942467,32.8333333 37.7777778,32.8333333 L39.2222222,32.8333333 C39.6057533,32.8333333 39.9166667,33.1442467 39.9166667,33.5277778 L39.9166667,41.2376789 C39.9166667,42.4112764 38.9652794,43.3627321 37.7916667,43.3627321 C37.3655561,43.3627321 36.9510168,43.2346313 36.6007867,42.9976358 L36.4312748,42.8701491 L30,37.50975 L23.5687252,42.8701491 C22.7234861,43.574515 21.4929682,43.5114751 20.7233835,42.7579578 L20.5758631,42.5980707 C20.3030814,42.2707327 20.1360669,41.8703014 20.0939154,41.4495208 L20.0833333,41.2376789 L20.0833333,20.0833333 C20.0833333,18.5896541 21.2391602,17.3659327 22.7052117,17.2577715 L22.9166667,17.25 L29.3055556,17.25 Z M39.2222222,17.25 C39.6057533,17.25 39.9166667,17.5609134 39.9166667,17.9444444 L39.9163333,21.499 L43.4722222,21.5 C43.8557533,21.5 44.1666667,21.8109134 44.1666667,22.1944444 L44.1666667,23.6388889 C44.1666667,24.02242 43.8557533,24.3333333 43.4722222,24.3333333 L39.9163333,24.333 L39.9166667,27.8888889 C39.9166667,28.27242 39.6057533,28.5833333 39.2222222,28.5833333 L37.7777778,28.5833333 C37.3942467,28.5833333 37.0833333,28.27242 37.0833333,27.8888889 L37.0823333,24.333 L33.5277778,24.3333333 C33.1442467,24.3333333 32.8333333,24.02242 32.8333333,23.6388889 L32.8333333,22.1944444 C32.8333333,21.8109134 33.1442467,21.5 33.5277778,21.5 L37.0823333,21.499 L37.0833333,17.9444444 C37.0833333,17.5609134 37.3942467,17.25 37.7777778,17.25 L39.2222222,17.25 Z" fill="#111319" fill-rule="nonzero"></path></g></svg>';function r(e){t.html(e),function e(){if("function"!=typeof window.isItemInWatchlist){setTimeout(e,100);return}$("#dynamic-main-slider .slider-btn.add-btn").each(function(){let e=$(this),t=e.attr("data-post-id");window.isItemInWatchlist(t)?e.addClass("added").html('<svg viewBox="0 0 60 60"><circle fill="#fff" cx="30" cy="30" r="30"></circle><path d="M29.3,17.25C29.7,17.25,30,17.56,30,17.94V19.38C30,19.77,29.7,20.08,29.3,20.08H22.91V39.72L28.64,34.95C29.37,34.34,30.41,34.3,31.18,34.82L37.08,39.72V33.52C37.08,33.14,37.39,32.83,37.77,32.83H39.22C39.6,32.83,39.91,33.14,39.91,33.52V41.23C39.91,42.41,38.96,43.36,37.79,43.36C37.36,43.36,36.95,43.23,36.6,42.99L30,37.5L23.56,42.87C22.72,43.57,21.49,43.51,20.72,42.75C20.3,42.27,20.13,41.87,20.08,41.23V20.08C20.08,18.58,21.23,17.36,22.7,17.25H29.3Z" fill="#111319" fill-rule="nonzero"></path><path d="M33 23L37 27L44 18" stroke="#111319" stroke-width="3" fill="none" stroke-linecap="round" stroke-linejoin="round"></path></svg>'):e.removeClass("added").html(l)})}(),t.owlCarousel({items:1,loop:!0,autoplay:!0,autoplayTimeout:5e3,dots:!0,nav:!0,startPosition:0,navText:['<button type="button" class="owl-prev" aria-label="Previous Slide"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"/></svg></button>','<button type="button" class="owl-next" aria-label="Next Slide"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.59L10 18l6-6-6-6-1.41 1.41L13.17 12z"/></svg></button>']}),t.trigger("refresh.owl.carousel");let a=function(e){var t=$(e.target).find(".owl-item").eq(e.item.index);t.add(t.next()).add(t.prev()).each(function(){var e=$(this).find(".lazy-bg");e.length&&e.data("bg-image")&&e.css("background-image","url("+e.data("bg-image")+")").removeClass("lazy-bg")})};t.on("initialized.owl.carousel translated.owl.carousel",a)}function o(){$.ajax({url:s,type:"get",dataType:"jsonp",success:function(e){if(!e.feed.entry||0===e.feed.entry.length){t.closest(".content-slider").hide();return}var a=e.feed.entry.map(function(e,t){var a=e.link.find(e=>"alternate"==e.rel).href;if(!a)return $.Deferred().reject().promise();var i=e.id.$t.split(".post-")[1];return $.get(a).then(function(e){var n=$(e),s=n.find("span.slider-backdrop").text().trim()||n.find('img[alt="poster"]').attr("src");s&&=s.replace(/\/s\d+(-[a-z0-9]+)*\//,"/w1280-h720-c/").replace(/\/t\/p\/w\d+[^/]*\//,"/t/p/original/");var r=n.find(".entry-title").text().trim(),o=n.find(".post-body p").first().text().trim(),d=n.find(".meta-title-logo"),c=d.find("img").attr("src")||d.text().trim(),_={titleLogo:c,rating:n.find(".meta-rating").text().trim(),year:n.find(".meta-year").text().trim(),pg:n.find(".meta-pg").text().trim(),country:n.find(".meta-country").text().trim(),genres:n.find(".meta-genre").map(function(){return $(this).text().trim()}).get(),imdb:n.find(".meta-imdb").text().trim(),language:n.find(".meta-language").text().trim()},p='<div class="slider-item">'+(0===t?'<div class="slider-background-image" style="background-image: url(\''+s+"');\"></div>":'<div class="slider-background-image lazy-bg" data-bg-image="'+s+'"></div>')+'<div class="slider-shadow-overlay"></div><div class="slider-info-container">';return _.titleLogo&&_.titleLogo.startsWith("http")?p+='<img src="'+_.titleLogo.replace("/original/","/w300/")+'" alt="'+r+' Logo" class="slider-title-logo">':p+='<h2 class="slider-title-main">'+r+"</h2>",p+='<div class="slider-styled-badge"><span class="badge-part-one">TOP '+(t+1)+'</span><span class="badge-part-two">Featured</span></div>',p+='<div class="slider-meta-line">',_.imdb?p+='<span class="meta-item imdb-rating"><div class="imdb-logo-bg"></div>'+_.imdb+"</span>":_.rating&&(p+='<span class="meta-item star"> '+_.rating+"</span>"),_.year&&(p+='<span class="meta-item">'+_.year+"</span>"),_.pg&&(p+='<span class="meta-item">'+_.pg+"</span>"),_.country&&(p+='<span class="meta-item">'+_.country+"</span>"),p+="</div>",p+='<div class="slider-meta-line genres">',_.genres.length>0&&_.genres.forEach(function(e){p+='<span class="genre-tag">'+e+"</span>"}),p+="</div>",p+='<p class="slider-caption">'+(o?o.substring(0,150)+"...":"")+"</p>",p+='<div class="slider-buttons"><a href="'+a+'" class="slider-btn play-btn" title="Watch Now"><svg viewBox="0 0 60 60"><g fill="none" fill-rule="evenodd" stroke="none" stroke-width="1"><circle cx="30" cy="30" fill="transparent" r="30"></circle><path d="M35.7461509,22.4942263 L45.1405996,36.5858994 C46.059657,37.9644855 45.6871354,39.8270935 44.3085493,40.7461509 C43.8157468,41.0746859 43.2367237,41.25 42.6444487,41.25 L23.8555513,41.25 C22.198697,41.25 20.8555513,39.9068542 20.8555513,38.25 C20.8555513,37.657725 21.0308654,37.078702 21.3594004,36.5858994 L30.7538491,22.4942263 C31.6729065,21.1156403 33.5355145,20.7431187 34.9141006,21.662176 C35.2436575,21.8818806 35.5264463,22.1646695 35.7461509,22.4942263 Z" fill="#FFFFFF" transform="translate(33.250000, 30.000000) rotate(-270.000000) translate(-33.250000, -30.000000) "></path></g></svg></a><a href="#" class="slider-btn add-btn" title="Add to Watchlist" aria-label="Add to Watchlist" data-post-id="'+i+'" data-post-title="'+r+'" data-post-url="'+a+'" data-post-image="'+s+'">'+l+"</a></div>",p+="</div></div>"})});$.when.apply($,a).done(function(){var e=Array.prototype.slice.call(arguments).join("");let t={timestamp:Date.now(),slidesHtml:e};localStorage.setItem(n,JSON.stringify(t)),r(e)})},error:function(){t.closest(".content-slider").hide()}})}let d=localStorage.getItem(n);if(d){let c=JSON.parse(d);r(c.slidesHtml),Date.now()-c.timestamp>864e5&&o()}else t.html('<div class="slider-item is-loading"><div class="slider-background-image"></div></div>').owlCarousel({items:1}),o()}(),i(),$(window).on("scroll resize",i),$(document).on("translated.owl.carousel changed.owl.carousel",".owl-carousel",i),$(document).on("translated.owl.carousel",".owl-carousel",function(){i()}),setTimeout(i,200),a("#Blog1"),$("#Blog1 .index-post-wrap").addClass("posts-loaded"),s(),function e(){var t=$("#PopularPosts1");if(!t.length)return;var a=t.find(".popular-posts-skeleton"),n=t.find("#popular-posts-carousel");if(!n.length||!a.length)return;var s="popular_posts_top10_html_cache_v2";function r(e){if(!(e.parent().find(".header-carousel-nav").length>0)){var t=e.attr("id");e.parent().append('\n            <div class="header-carousel-nav">\n                <button class="header-nav-btn prev" aria-label="Previous" data-target="#'+t+'"><svg fill="none" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M15 18l-6-6 6-6"/></svg></button>\n                <button class="header-nav-btn next" aria-label="Next" data-target="#'+t+'"><svg fill="none" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M9 6l6 6-6 6"/></svg></button>\n            </div>')}}let d={loop:!1,margin:16,nav:!1,dots:!1,smartSpeed:250,responsive:{0:{autoWidth:!0,margin:8},768:{items:4,margin:16},1024:{items:6}},onInitialized:l,onResized:l};try{let c=localStorage.getItem(s);if(c){let _=JSON.parse(c);if(Date.now()-_.timestamp<216e5){n.html(_.html),a.remove(),n.show(),n.owlCarousel(d),r(n),i(),o(),"function"==typeof applySafeMode&&applySafeMode();return}}}catch(p){console.error("Could not read popular posts cache.",p)}!function e(){var l=n.children().get();if(0===l.length){t.hide();return}Promise.all(l.map(function(e){var t=$(e),a=t.data("post-id");return a?fetch("/feeds/posts/default/"+a+"?alt=json").then(e=>e.ok?e.json():Promise.reject("Failed to fetch")).then(e=>{if(!e.entry)return;e.entry.category&&e.entry.category.some(e=>"Mature"===e.term)&&t.addClass("is-mature");let a=e.entry.category&&e.entry.category.find(e=>"Mature"!==e.term)?.term||"",i=t.find(".entry-label");a?i.text(a).show():i.hide();let n=document.createElement("div");n.innerHTML=e.entry.content.$t;let s=(n.querySelector('img[alt="poster"]')?.src||"https://resources.blogblog.com/img/blank.gif").replace(/\/s\d+(-[a-z0-9]+)*\//,"/w400-h600-c-rw/");t.find(".entry-image").attr("data-image",s)}).catch(()=>{}):Promise.resolve()})).finally(function(){let e=n.html();localStorage.setItem(s,JSON.stringify({html:e,timestamp:Date.now()})),a.remove(),n.show(),n.owlCarousel(d),r(n),setTimeout(i,100),o(),"function"==typeof applySafeMode&&applySafeMode()})}()}(),function e(){let t=$("#HTML8");if(!t.length)return;let a=t.find(".trending-filter-dropdown"),i=t.find(".trending-filter-btn"),s=t.find("#trending-filter-label"),l=t.find(".trending-filter-menu"),r=t.find(".widget-content");function o(e,t){s.text(t),n(r,{label:"_all_"===e?null:e,maxResults:10,style:"top-list",sortBy:"rating"})}i.on("click",function(e){e.stopPropagation(),a.toggleClass("is-open")}),l.on("click","li",function(){let e=$(this),t=e.data("label"),i=e.text();l.find("li.active").removeClass("active"),e.addClass("active"),o(t,i),a.removeClass("is-open")}),$(document).on("click",function(){a.hasClass("is-open")&&a.removeClass("is-open")}),l.find('li[data-label="_all_"]').addClass("active"),o("_all_","All")}(),function e(){let t=$(".widget.HTML h3.title:contains('Continue Watching')").closest(".widget");if(!t.length)return;let a=t.find(".widget-header");a.length&&0===a.find(".header-controls").length&&a.append("\n            <div class='header-controls'>\n              <a class='carousel-view-switch' href='/p/history.html'>\n                <span>View All</span>\n                <svg fill='none' viewBox='0 0 24 24'><path stroke='currentColor' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M9 18l6-6-6-6'/></svg>\n              </a>\n            </div>");let n=t.find(".widget-content"),s=JSON.parse(localStorage.getItem("watchHistoryIDs")||"[]");if(0===s.length){t.hide();return}t.show();let l=$(".sidebar-logo .logo-text").text().trim()||"Loading...",r='<div class="popular-posts-skeleton">'+Array.from({length:Math.min(s.length,6)},()=>'<div class="skeleton-post-item"><div class="skeleton-image-placeholder"><span class="skeleton-card-text">'+l+'</span></div><div class="skeleton-title-placeholder"></div></div>').join("")+"</div>";n.html(r),new IntersectionObserver((e,a)=>{e.forEach(e=>{e.isIntersecting&&(Promise.all(s.slice(0,10).map(e=>$.ajax({url:"/feeds/posts/default/"+e+"?alt=json-in-script",dataType:"jsonp"}).then(t=>{if(!t.entry)return null;let a=t.entry,i=document.createElement("div");i.innerHTML=a.content.$t;let n=(i.querySelector('img[alt="poster"]')?.src||"").replace(/\/s\d+(-[a-z0-9]+)*\//,"/s400-rw/"),s=$(i).find("#extra-meta .meta-type").text().trim(),l=$(i).find("#extra-meta .meta-rating").text().trim(),r=$(i).find("#extra-meta .meta-year").text().trim(),o=JSON.parse(localStorage.getItem("abefilmWatchProgress")||"{}"),d=i.querySelector("#episodes-data ul[data-server-name]"),c=d?d.querySelectorAll("a").length:0,_=o["post-"+e]||0;return{id:e,title:a.title.$t,url:a.link.find(e=>"alternate"===e.rel).href,imageUrl:n||"https://resources.blogblog.com/img/blank.gif",type:"TV Series"===s?"TV":"MOVIE",totalEpisodes:c,currentEpisode:_+1,progressPercent:c>0?Math.min(100,(_+1)/c*100):100,rating:l,year:r}}).fail(()=>null))).then(e=>{let a=e.filter(Boolean);if(0===a.length){t.hide();return}let s="";a.forEach(e=>{let t="",a="";e.progressPercent>0&&e.totalEpisodes>0&&(t='<div class="cw-progress-info"><div class="cw-progress-meta"><span class="ep-current">EP '+e.currentEpisode+'</span><span class="ep-count"><span class="current">'+e.currentEpisode+"</span> / "+e.totalEpisodes+'</span></div><div class="progress-bar-container"><div class="progress-bar-fill" style="width: '+e.progressPercent+'%;"></div></div>',a='<div class="progress-bar-overlay"><div class="progress-bar-fill" style="width: '+e.progressPercent+'%;"></div></div>'),s+='\n    <article class="index-post continue-watching-item" data-post-id="'+e.id+'">\n                                <a class="entry-image-wrap" href="'+e.url+'" title="'+e.title+'">\n                                    <span class="entry-image" data-image="'+e.imageUrl+'"></span>\n                                    <span class="cw-type-tag">'+e.type+'</span>\n                                    <button class="cw-remove-btn" title="Remove from History">&times;</button>\n                                    '+a+'\n                                    <div class="thumb-meta-overlay">\n                                        '+(e.rating?'\n                                            <span class="thumb-rating">\n                                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" style="width: 11px; height: 11px; vertical-align: text-bottom; margin-right: 4px;">\n                                                    <path d="M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L.173 6.765c-.329-.314-.158-.888.283-.95l4.898-.696L7.538.792c.197-.39.73-.39.927 0l2.184 4.327 4.898.696c.441.062.612.636.282.95l-3.522 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z"/>\n                                                </svg> \n                                                '+e.rating+"\n                                            </span>\n                                        ":"<span></span>")+"\n                                        "+(e.year?'<span class="thumb-year">'+e.year+"</span>":"")+'\n                                    </div>\n                                </a>\n                                <div class="entry-header">\n                                    <h2 class="entry-title"><a href="'+e.url+'">'+e.title+"</a></h2>\n                                    "+t+"\n                                </div>\n                            </article>"}),n.html('<div class="index-post-wrap owl-carousel owl-theme" id="continue-watching-carousel">'+s+"</div>"),i(),n.find(".owl-carousel").owlCarousel({loop:!1,margin:10,nav:!0,dots:!1,navText:['<svg fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 18l-6-6 6-6"/></svg>','<svg fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 6l6 6-6 6"/></svg>'],responsive:{0:{autoWidth:!0,margin:8,stagePadding:16},768:{items:4,margin:10,stagePadding:0},1024:{items:6,stagePadding:0}}})}),a.unobserve(e.target))})},{rootMargin:"0px 0px 300px 0px"}).observe(t[0]),n.on("click",".cw-remove-btn",function(e){e.preventDefault(),e.stopPropagation();var a=$(this).closest(".continue-watching-item"),i=a.data("post-id");i&&"function"==typeof window.removeFromHistory&&window.removeFromHistory(i);var n=$("#continue-watching-carousel"),s=n.data("owl.carousel");if(s&&s.items().length>0){if(1===s.items().length)t.hide();else{var l=a.closest(".owl-item").index();n.trigger("remove.owl.carousel",[l]).trigger("refresh.owl.carousel")}}})}(),function e(){var t=$(".homepage-filter-buttons");if(!t.length)return;var a=$("#filtered-posts-container");if(!a.length)return;var n=$("#filtered-posts-wrap"),s=$(".sidebar-logo .logo-text").text().trim();let l=["Action","Action & Adventure","Adventure","Animation","Comedy","Crime","Documentary","Drama","Family","Fantasy","History","Horror","Kids","Music","Mystery","Reality","Romance","Sci-Fi & Fantasy","Science Fiction","Thriller","War","Western"];function r(e){if(e){var t="/search/label/"+encodeURIComponent(e)+"?max-results=12";a.show();for(var r="",d=0;d<6;d++)r+='<div class="skeleton-post-item"><div class="skeleton-image-placeholder"><span class="skeleton-card-text">'+s+'</span></div><div class="skeleton-title-placeholder"></div></div>';n.addClass("is-loading").html(r),n.find(".owl-carousel").length&&n.find(".owl-carousel").trigger("destroy.owl.carousel"),$.get(t,function(e){var t=$(e).find("#Blog1 .index-post");if(0===t.length){n.removeClass("is-loading").html('<p class="error-msg">No posts found for this genre.</p>');return}var a=t.map(function(){var e=$(this),t=e.find("a.entry-image-wrap").attr("href"),a=e.data("post-id");return t&&a?$.ajax({url:"/feeds/posts/default/"+a+"?alt=json",dataType:"json"}).then(function(e){if(!e.entry)return null;let i=document.createElement("div");i.innerHTML=e.entry.content.$t;let n=(i.querySelector('img[alt="poster"]')?.src||"").replace(/\/s\d+(-[a-z0-9]+)*\//,"/s400-rw/"),s=(e.entry.category||[]).map(e=>e.term).find(e=>l.includes(e))||"";return{id:a,link:t,title:e.entry.title.$t,label:s,imageUrl:n||"https://resources.blogblog.com/img/blank.gif"}}):$.Deferred().reject().promise()}).get();$.when.apply($,a).done(function(){var e="",t=Array.prototype.slice.call(arguments);t.forEach(function(t){if(t&&t.link&&t.imageUrl){var a=t.label?'<span class="entry-label">'+t.label+"</span>":"";e+='<article class="index-post" data-post-id="'+t.id+'"><a class="entry-image-wrap" href="'+t.link+'" title="'+t.title+'"><span class="entry-image" data-image="'+t.imageUrl+'"></span>'+a+'<div class="thumb-meta-overlay"><span class="thumb-meta thumb-duration"></span><span class="thumb-meta thumb-rating"></span></div></a><div class="entry-header"><h2 class="entry-title"><a href="'+t.link+'">'+t.title+'</a></h2><div class="card-sub-meta"><div class="sub-meta-left"><span class="sub-meta-type"></span><span class="sub-meta-year"></span></div><div class="sub-meta-right"><span class="sub-meta-cc"></span><span class="sub-meta-mic"></span></div></div></div></article>'}});var a='<div class="index-post-wrap owl-carousel owl-theme">'+e+"</div>";n.removeClass("is-loading").html(a),i(),o(),n.find(".owl-carousel").owlCarousel({loop:!1,margin:16,nav:!0,navText:['<button type="button" class="owl-prev" aria-label="Previous Posts"><svg viewBox="0 0 16 16"><path d="M11.354 1.646a.5.5 0 0 1 0 .708L5.707 8l5.647 5.646a.5.5 0 0 1-.708.708l-6-6a.5.5 0 0 1 0-.708l6-6a.5.5 0 0 1 .708 0z"/></svg></button>','<button type="button" class="owl-next" aria-label="Next Posts"><svg viewBox="0 0 16 16"><path d="M4.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L10.293 8 4.646 2.354a.5.5 0 0 1 0-.708z"/></svg></button>'],dots:!1,responsive:{0:{items:3,margin:8},768:{items:4,margin:16},1024:{items:6}}})}).fail(function(){n.removeClass("is-loading").html('<p class="error-msg">Error loading post details.</p>')})}).fail(function(){n.removeClass("is-loading").html('<p class="error-msg">Could not load posts.</p>')})}}t.on("click",".filter-btn",function(){var e=$(this);if(!e.hasClass("active")){var a=e.data("label");t.find(".filter-btn").removeClass("active"),e.addClass("active"),r(a)}});var d=t.find(".filter-btn.active").data("label");d&&r(d)}();let p,m,u;if(p=document.querySelectorAll('.widget-content[data-shortcode*="{lazyPosts}"]'),m=(e,t)=>{e.forEach(e=>{if(e.isIntersecting){let a=e.target,s=$(a),l=s.data("shortcode");if(t.unobserve(a),!l)return;let r={label:(l.match(/\$label=\{([^}]+)\}/)||[])[1],maxResults:parseInt((l.match(/\$results=\{([^}]+)\}/)||[])[1],10)||6,style:(l.match(/\$style=\{([^}]+)\}/)||[])[1]||"nowrap",sortBy:(l.match(/\$sortBy=\{([^}]+)\}/)||[])[1]};var d=s.closest(".widget").find(".widget-header");if(d.length>0&&r.label&&"filtered-switch"!==r.style&&0===d.find(".carousel-view-switch").length){var c="/p/leaderboard.html?filter="+encodeURIComponent(r.label);0===d.find(".header-controls").length&&d.append('<div class="header-controls"></div>'),d.find(".header-controls").append('<a class="carousel-view-switch" href="'+c+'"><span>View All</span><svg fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 18l6-6-6-6"/></svg></a>')}"filtered-switch"===r.style?function e(t,a){let n=[],s=t.find(".switch-grid"),l=t.find(".switch-button"),r=a.maxResults||6,d=a.label;function c(){if(0===n.length)return;let e=[...n].sort(()=>.5-Math.random()).slice(0,r).map(e=>{let t=e.isMature?" is-mature":"",a=e.label?'<span class="entry-label">'+e.label+"</span>":"";return'\n            <article class="index-post'+t+'" data-post-id="'+e.id+'">\n              <a class="entry-image-wrap" href="'+e.url+'" title="'+e.title+'">\n                <span class="entry-image" data-image="'+e.imageUrl+'"></span>\n                '+a+'\n                <div class="thumb-meta-overlay">\n                  <span class="thumb-meta thumb-duration"></span>\n                  <span class="thumb-meta thumb-rating"></span>\n                </div>\n              </a>\n              <div class="entry-header">\n                <h2 class="entry-title"><a href="'+e.url+'">'+e.title+'</a></h2>\n                <div class="card-sub-meta">\n                  <div class="sub-meta-left"><span class="sub-meta-type"></span><span class="sub-meta-year"></span></div>\n                  <div class="sub-meta-right"><span class="sub-meta-cc"></span><span class="sub-meta-mic"></span></div>\n                </div>\n              </div>\n            </article>'}).join("");s.html(e),i(),o()}l.on("click",c),function e(){if(!d){s.html('<p class="error-msg">Error: No label specified for this widget.</p>');return}$.ajax({url:"/feeds/posts/default/-/"+encodeURIComponent(d)+"?alt=json-in-script&max-results=50",dataType:"jsonp",success:function(e){if(e.feed.entry){let t=["Action","Action & Adventure","Adventure","Animation","Comedy","Crime","Documentary","Drama","Family","Fantasy","History","Horror","Kids","Music","Mystery","Reality","Romance","Sci-Fi & Fantasy","Science Fiction","Thriller","War","Western"];(n=e.feed.entry.map(function(e){let a=document.createElement("div");a.innerHTML=e.content.$t;let i=($(a).find('img[alt="poster"]').attr("src")||"https://resources.blogblog.com/img/blank.gif").replace(/\/s\d+(-[a-z0-9]+)*\//,"/w400-rw/"),n=(e.category||[]).map(e=>e.term).find(e=>t.includes(e))||"";return{id:e.id.$t.split(".post-")[1],url:e.link.find(e=>"alternate"===e.rel).href,title:e.title.$t,imageUrl:i,label:n,isMature:!!e.category&&e.category.some(e=>"Mature"===e.term)}})).length>r&&l.show(),c()}else s.html('<p class="error-msg">No posts found for this category.</p>')},error:function(){s.html('<p class="error-msg">Error loading posts.</p>')}})}()}(s,r):n(s,r)}})},u=new IntersectionObserver(m,{rootMargin:"0px 0px 250px 0px"}),p.forEach(e=>{let t=$(e),a=t.data("shortcode")||"",i=(a.match(/\$style=\{([^}]+)\}/)||[])[1]||"nowrap";var n,s=$(".sidebar-logo .logo-text").text().trim()||"ABEFILM",l="";if("wide-list"===i){n=3,l='<div class="popular-posts-skeleton">';for(var r=0;r<n;r++)l+='\n            <div class="skeleton-wide-item">\n                <div class="skeleton-wide-thumb">\n                    <div class="skeleton-rank-badge"></div>\n                </div>\n                <div class="skeleton-wide-info">\n                    <div class="skeleton-line title"></div>\n                    <div class="skeleton-meta-group">\n                        <span class="skeleton-meta-tag"></span>\n                        <span class="skeleton-meta-tag"></span>\n                        <span class="skeleton-meta-tag"></span>\n                    </div>\n                    <div class="skeleton-genre-group">\n                        <span class="skeleton-genre-tag"></span>\n                        <span class="skeleton-genre-tag"></span>\n                    </div>\n                    <div class="skeleton-synopsis-group">\n                        <div class="skeleton-line synopsis-line"></div>\n                        <div class="skeleton-line synopsis-line short"></div>\n                    </div>\n                </div>\n            </div>';l+="</div>"}else if("ranked-grid-alt"===i){n=parseInt((a.match(/\$results=\{([^}]+)\}/)||[])[1],10)||9,l='<div class="popular-posts-skeleton">';for(var r=0;r<n;r++)l+='<div class="skeleton-ranked-item"><div class="skeleton-ranked-thumb"></div><div class="skeleton-ranked-rank"></div><div class="skeleton-ranked-info"><div class="skeleton-line title"></div><div class="skeleton-line tags"></div></div></div>';l+="</div>"}else if("filtered-switch"===i){let o=parseInt((a.match(/\$results=\{([^}]+)\}/)||[])[1],10)||6,d="";for(let c=0;c<o;c++)d+='<div class="skeleton-post-item"><div class="skeleton-image-placeholder"><span class="skeleton-card-text">'+s+'</span></div><div class="skeleton-title-placeholder"></div></div>';l='\n                <div class="filtered-switch-widget">\n                  <div class="index-post-wrap switch-grid">'+d+'</div>\n                  <div class="switch-footer">\n                    <button class="switch-button" style="display: none;">\n                      <svg fill="currentColor" height="18" viewBox="0 0 24 24" width="18"><path d="M17.65,6.35C16.2,4.9 14.21,4 12,4A8,8 0 0,0 4,12A8,8 0 0,0 12,20C15.73,20 18.84,17.45 19.73,14H17.65C16.83,16.33 14.61,18 12,18A6,6 0 0,1 6,12A6,6 0 0,1 12,6C13.66,6 15.14,6.69 16.22,7.78L13,11H20V4L17.65,6.35Z"></path></svg>\n                      <span>Switch</span>\n                    </button>\n                  </div>\n                </div>'}else{n=window.innerWidth<768?3:window.innerWidth<1024?4:6,l='<div class="popular-posts-skeleton is-carousel">';for(var r=0;r<n;r++)l+='<div class="skeleton-post-item"><div class="skeleton-image-placeholder"><span class="skeleton-card-text">'+s+'</span></div><div class="skeleton-title-placeholder"></div></div>';l+="</div>"}t.html(l),u.observe(e)}),function e(){var t=$("#abefilm-load-more-link");if(t.length){var n=$("#blog-pager .loading"),l=$("#blog-pager .no-more"),r=$("#Blog1 .index-post-wrap");n.hide(),l.hide(),t.on("click",function(e){e.preventDefault();var d=$(this).attr("data-load");if(!d||""===d.trim()){t.hide(),l.css("display","flex");return}t.hide(),n.show(),$.ajax({url:d,success:function(e){var n=$(e).find("#Blog1 .index-post"),d=$(e).find("#abefilm-load-more-link");n.length>0&&(r.append(n),a("#Blog1"),i(),s(),o()),d.length>0&&d.attr("data-load")?(t.attr("data-load",d.attr("data-load")),t.css("display","flex"),l.hide()):(t.hide(),l.css("display","flex"))},error:function(){t.css("display","flex"),l.hide()},complete:function(){n.hide()}})}),t.attr("data-load")&&""!==t.attr("data-load").trim()?(t.css("display","flex"),l.hide()):(t.hide(),l.css("display","flex"))}}(),function e(){let t=$(".homepage-filter-buttons");if(!t.length)return;let a=t.find(".scroll-area"),i=t.find(".prev-btn"),n=t.find(".next-btn"),s=a[0];function l(){setTimeout(function(){let e=s.scrollLeft,t=s.scrollWidth,a=s.clientWidth;i.css("visibility",e>5?"visible":"hidden"),n.css("visibility",t-e-a>5?"visible":"hidden")},150)}l(),a.on("scroll",l),$(window).on("resize",l),n.on("click",function(){a.animate({scrollLeft:s.scrollLeft+s.clientWidth},300)}),i.on("click",function(){a.animate({scrollLeft:s.scrollLeft-s.clientWidth},300)})}(),o(),function e(){if($("body").find(".item-post").length){var t=$(".recommendation-posts-grid");if(t.length){var a=$("#abefilm-related-posts .widget-content").text().trim().match(/\$results=\{([^}]+)\}/),n=a?parseInt(a[1],10):6,s=t.data("label"),l=String(t.data("postId"));if(!s){$(".recommendation-section").hide();return}var r="/feeds/posts/default/-/"+encodeURIComponent(s)+"?alt=json-in-script&max-results="+(n+1);$.ajax({url:r,type:"get",dataType:"jsonp",success:function(e){if(!e.feed||!e.feed.entry||e.feed.entry.length<1){$(".recommendation-section").hide();return}var a=e.feed.entry.filter(e=>e.id.$t.split(".post-")[1]!==l).slice(0,n);if(0===a.length){$(".recommendation-section").hide();return}var s=a.map(function(e){let t=e.link.find(e=>"alternate"===e.rel).href,a=e.title.$t,i=e.id.$t.split(".post-")[1],n=document.createElement("div");n.innerHTML=e.content.$t;let s=(n.querySelector('img[alt="poster"]')?.src||"").replace(/\/s\d+(-[a-z0-9]+)*\//,"/s400-rw/"),l=e.category&&e.category.length>0?e.category[0].term:"";return'<article class="index-post'+(e.category&&e.category.some(e=>"Mature"===e.term)?" is-mature":"")+'" data-post-id="'+i+'">\n                   <a class="entry-image-wrap" href="'+t+'" title="'+a+'">\n                       <span class="entry-image" data-image="'+s+'"></span>\n                       '+(l?'<span class="entry-label">'+l+"</span>":"")+' \n                       <div class="thumb-meta-overlay">\n                           <span class="thumb-meta thumb-duration"></span>\n                           <span class="thumb-meta thumb-rating"></span>\n                       </div>\n                   </a>\n                   <div class="entry-header">\n                       <h2 class="entry-title"><a href="'+t+'">'+a+'</a></h2>\n                       <div class="card-sub-meta">\n                           <div class="sub-meta-left"><span class="sub-meta-type"></span><span class="sub-meta-year"></span></div>\n                           <div class="sub-meta-right"><span class="sub-meta-cc"></span><span class="sub-meta-mic"></span></div>\n                       </div>\n                   </div>\n               </article>'}).join("");t.removeClass("is-loading").html(s),i(),o(),applySafeMode()},error:function(){$(".recommendation-section").hide()}})}}}(),$('div[data-shortcode*="$style="]').each(function(){var e=$(this).data("shortcode");e.includes("$style={grid}")?$(this).parent(".widget").addClass("abefilm-static-grid"):e.includes("$style={nowrap}")?$(this).parent(".widget").addClass("abefilm-carousel-widget"):e.includes("$style={wide-list}")?$(this).parent(".widget").addClass("abefilm-wide-list"):e.includes("$style={ranked-grid-alt}")&&$(this).parent(".widget").addClass("abefilm-ranked-grid")}),$("#back-top").on("click",function(e){e.preventDefault(),$("html, body").animate({scrollTop:0},500)}),$(window).on("scroll",function(){$(this).scrollTop()>300?$("#back-top").addClass("on"):$("#back-top").removeClass("on")}),"function"==typeof updateWatchlistBadge&&updateWatchlistBadge(),"function"==typeof updateHistoryBadge&&updateHistoryBadge(),"function"==typeof updateNotificationCount&&updateNotificationCount(),$(".leaderboard-page-container").length){let g=function(){E&&E.disconnect();let e=document.querySelectorAll("img.lazy-load:not(.loaded)");"IntersectionObserver"in window?(E=new IntersectionObserver((e,t)=>{e.forEach(e=>{if(e.isIntersecting){let a=e.target;a.src=a.dataset.src,a.onload=()=>a.classList.add("loaded"),a.classList.remove("lazy-load"),t.unobserve(a)}})},{rootMargin:"0px 0px 250px 0px"}),e.forEach(e=>E.observe(e))):e.forEach(e=>e.src=e.dataset.src)},h=document.querySelector(".leaderboard-filters");if(h){let v=!1,f,y;h.addEventListener("mousedown",e=>{v=!0,h.classList.add("active"),f=e.pageX-h.offsetLeft,y=h.scrollLeft,e.preventDefault()}),h.addEventListener("mouseleave",()=>{v=!1,h.classList.remove("active")}),h.addEventListener("mouseup",()=>{v=!1,h.classList.remove("active")}),h.addEventListener("mousemove",e=>{if(!v)return;e.preventDefault();let t=(e.pageX-h.offsetLeft-f)*2;h.scrollLeft=y-t})}let b=[],w=0,k=10,C=!1,L=$(".leaderboard-filters"),x=$(".leaderboard-list");[{name:"Latest Post",type:"latest"},{name:"Hot Updates",type:"trending"},{name:"Top Rating",type:"top-rating"},{name:"Movie",type:"label"},{name:"TV Series",type:"label"},{name:"Action",type:"label"},{name:"Romance",type:"label"},{name:"Horror",type:"label"},{name:"Comedy",type:"label"},{name:"Thriller",type:"label"},{name:"Fantasy",type:"label"},{name:"Animation",type:"label"},{name:"Adventure",type:"label"},{name:"Crime",type:"label"},{name:"Documentary",type:"label"},{name:"Drama",type:"label"},{name:"Family",type:"label"},{name:"History",type:"label"},{name:"Music",type:"label"},{name:"Mystery",type:"label"},{name:"Science Fiction",type:"label"},{name:"War",type:"label"},{name:"Western",type:"label"}].forEach(e=>{L.append('<button class="filter-btn" data-type="'+e.type+'" data-name="'+e.name+'">'+e.name+"</button>")});let E;async function S(e){let t=1,a=!1,i=!1,n=[],s=$(".leaderboard-list"),l=$(".leaderboard-header");async function r(t){if(a||i)return;if(a=!0,0===s.find(".loader").length&&s.append('<div class="loader" style="margin: 20px auto; grid-column: 1 / -1;"></div>'),"top-rating"===e.type&&n.length>0){let l=t-1,r=l+10,d=n.slice(l,r);r>=n.length&&(i=!0),o(d,t),a=!1;return}let c="",_="top-rating"===e.type?150:10,p;c="/feeds/posts/default"+(("label"===e.type||"top-rating"===e.type)&&e.name?"/-/"+encodeURIComponent(e.name):"")+"?alt=json-in-script&max-results="+_+"&start-index="+t+("latest"===e.type||"trending"===e.type?"&orderby="+("latest"===e.type?"published":"updated"):"");try{let m={url:c,dataType:"jsonp"},u=(await $.ajax(m)).feed.entry||[];u.length<_&&"top-rating"!==e.type&&(i=!0);let g=(await Promise.all(u.map(e=>$.get(e.link.find(e=>"alternate"===e.rel).href).then(t=>{let a=$(t),i=a.find("#extra-meta");return{title:e.title.$t,url:e.link.find(e=>"alternate"===e.rel).href,imageUrl:a.find('img[alt="poster"]').attr("src"),backdropUrl:a.find("span.slider-backdrop").text().trim(),rating:parseFloat(i.find(".meta-rating").text().trim())||0,year:i.find(".meta-year").text().trim(),genres:i.find(".meta-genre").map((e,t)=>$(t).text().trim()).get(),synopsis:a.find("#overview-data").text().trim()}}).fail(()=>null)))).filter(Boolean);if("top-rating"===e.type){g.sort((e,t)=>t.rating-e.rating);let h=(n=g).slice(0,10);o(h,1),10>=n.length&&(i=!0)}else o(g,t)}catch(v){console.error("Error fetching leaderboard data:",v),s.find(".loader").remove()}finally{a=!1}}function o(e,a){if(s.find(".loader").remove(),0===e.length&&1===a){s.html('<p style="text-align:center; padding: 40px 0; grid-column: 1 / -1;">No posts found for this category.</p>');return}let i="";e.forEach((e,t)=>{i+='\n                <a href="'+e.url+'" class="leaderboard-item">\n                    <div class="rank-number">'+(a+t)+'</div>\n                    <div class="item-thumb"><img class="lazy-load" src="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" data-src="'+e.imageUrl+'" alt="'+e.title+'"/></div>\n                    <div class="item-info">\n                        <h4 class="item-title">'+e.title+'</h4>\n                        <div class="item-meta">\n                            '+(e.rating?'<span class="rating"> '+e.rating.toFixed(1)+"</span>":"")+"\n                            "+(e.year?"<span>\xb7</span><span>"+e.year+"</span>":"")+'\n                            <span class="item-genres">'+e.genres.slice(0,2).join(" \xb7 ")+'</span>\n                        </div>\n                        <p class="item-synopsis">'+e.synopsis+"</p>\n                    </div>\n                </a>"}),s.append(i),t=a+e.length,"function"==typeof g&&g()}$(window).off("scroll.leaderboard"),s.html(""),await r(1),setTimeout(()=>{let e=s.find(".leaderboard-item:first");e.length&&$.get(e.attr("href")).then(e=>{let t=$(e).find("span.slider-backdrop").text().trim();t&&l.css("background-image","url("+t+")")})},500),$(window).on("scroll.leaderboard",function(){!a&&!i&&s.is(":visible")&&$(window).scrollTop()+$(window).height()>=$(document).height()-400&&r(t)})}L.on("click",".filter-btn",function(){let e=$(this),t={name:e.data("name"),type:e.data("type")};JSON.stringify(t)!==JSON.stringify(null)&&(L.find(".active").removeClass("active"),e.addClass("active"),e[0].scrollIntoView({behavior:"smooth",inline:"center",block:"nearest"}),S(t))});let I=new URLSearchParams(window.location.search).get("filter"),M=!1;if(I){let B=$('.filter-btn[data-name*="'+decodeURIComponent(I)+'"]');B.length&&(B.trigger("click"),M=!0)}M||L.find(".filter-btn").first().trigger("click")}}),document.addEventListener("DOMContentLoaded",t),function(){let e="abefilm_favorites",t=()=>JSON.parse(localStorage.getItem(e)||"[]"),a=t=>localStorage.setItem(e,JSON.stringify(t)),i=e=>t().includes(String(e));function n(e){let t=$(e);i(t.attr("data-post-id"))?(t.addClass("favorited").attr("title","Remove from Favorites"),t.html('<svg viewBox="0 0 24 24"><path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/></svg><span>Favorited</span>')):(t.removeClass("favorited").attr("title","Add to Favorites"),t.html('<svg viewBox="0 0 24 24"><path d="M16.5 3c-1.74 0-3.41.81-4.5 2.09C10.91 3.81 9.24 3 7.5 3 4.42 3 2 5.42 2 8.5c0 3.78 3.4 6.86 8.55 11.54L12 21.35l1.45-1.32C18.6 15.36 22 12.28 22 8.5 22 5.42 19.58 3 16.5 3zm-4.4 15.55l-.1.1-.1-.1C7.14 14.24 4 11.39 4 8.5 4 6.5 5.5 5 7.5 5c1.54 0 3.04.99 3.57 2.36h1.87C13.46 5.99 14.96 5 16.5 5c2 0 3.5 1.5 3.5 3.5 0 2.89-3.14 5.74-7.9 10.05z"/></svg><span>Favorite</span>'))}function s(){$(".favorite-btn").each(function(){let e=$(this);if(!e.attr("data-post-id")){let t=e.siblings(".add-list-btn");e.attr("data-post-id",t.attr("data-post-id"))}n(this)})}$(document).on("click",".favorite-btn",function(e){e.preventDefault();let s=$(this).attr("data-post-id");if(!s)return;let l=t();i(s)?l=l.filter(e=>e!==String(s)):l.unshift(String(s)),a(l),$('.favorite-btn[data-post-id="'+s+'"]').each(function(){n(this)})}),$(document).ready(function(){s()}),$(document).on("abefilm:postDataReady",function(){s()})}(),document.addEventListener("DOMContentLoaded",function(){let e=document.getElementById("dynamic-share-btn");if(!e)return;let t=document.getElementById("share-fallback-modal");if(t){let a=t.querySelector(".share-modal-close"),i=t.querySelector("#share-copy-btn"),n=t.querySelector("#share-url-input"),s=()=>t.classList.remove("is-visible");a.addEventListener("click",s),t.addEventListener("click",e=>{e.target===t&&s()}),i.addEventListener("click",()=>{n.select(),document.execCommand("copy"),i.textContent="Copied!",setTimeout(()=>{i.textContent="Copy"},2e3)})}e.addEventListener("click",async e=>{e.preventDefault();let a=document.title,i=window.location.href;if(navigator.share)try{await navigator.share({title:a,text:a,url:i}),console.log("Content shared successfully")}catch(n){console.error("Error sharing:",n)}else t?openFallbackModal(a,i):console.warn("Share API not supported and fallback modal not found.")})}),document.addEventListener("DOMContentLoaded",function(){let e=document.getElementById("trailer-btn"),t=document.getElementById("trailer-modal");if(!e||!t)return;let a=t.querySelector("iframe"),i=t.querySelector(".trailer-modal-close"),n=()=>{let e=document.getElementById("source-data-container");if(!e){alert("Trailer data not found.");return}let i=e.querySelector("#trailer-data");if(!i||!i.textContent.trim()){alert("Trailer not available for this item.");return}let n=i.textContent.trim();n+=(n.includes("?")?"&":"?")+"autoplay=1",a.setAttribute("src",n),t.classList.add("is-visible")},s=()=>{t.classList.remove("is-visible"),a.setAttribute("src","")};e.addEventListener("click",e=>{e.preventDefault(),n()}),i.addEventListener("click",s),t.addEventListener("click",e=>{e.target===t&&s()})}),document.addEventListener("DOMContentLoaded",function(){let e=(e,t)=>{let a=document.getElementById(e),i=document.getElementById(t);!a&&i&&(a=i.closest(".trigger-rating-link, .action-btn"));let n=document.getElementById("post-review-data");if(!a||!n)return;let s="sb_rated_"+n.getAttribute("data-post-id");function l(){if(!i)return;let e=null!==localStorage.getItem(s);i.textContent=e?"My Rating":"Rate now"}l(),a.addEventListener("click",function(e){e.preventDefault();let t=document.getElementById("review-system");if(t){if(window.innerWidth<=767&&document.body.classList.contains("item-view")){let a=document.querySelector('.mobile-tab-btn[data-tab-target="#comment-tab-content"]');a&&!a.classList.contains("active")&&a.click(),setTimeout(()=>{t.scrollIntoView({behavior:"smooth",block:"center"})},100)}else t.scrollIntoView({behavior:"smooth",block:"center"})}});let r=document.getElementById("review-summary-wrapper");r&&new MutationObserver(l).observe(r,{childList:!0,subtree:!0})};e("rating-shortcut-btn","rating-shortcut-text"),e("mobile-rating-trigger","rating-trigger-text")}),document.addEventListener("DOMContentLoaded",function(){let e=document.querySelector(".share-btn");if(!e)return;let t=e.querySelectorAll(".share-icon-wrapper");if(0===t.length)return;let a=0;function i(){t.forEach(e=>{e.classList.remove("is-active","is-next")});let e=t[a],i=t[(a+1)%t.length];e.classList.add("is-active"),i.classList.add("is-next"),a=(a+1)%t.length}i(),setInterval(i,3e3)}),document.addEventListener("DOMContentLoaded",function(){let e=document.body,t=document.getElementById("open-theme-settings-modal"),a=document.getElementById("theme-settings-overlay"),i=document.getElementById("ts-close-btn"),n=document.getElementById("light-mode-btn"),s=document.getElementById("dark-mode-btn"),l=document.querySelectorAll("#gradient-colors .ts-swatch"),r=document.getElementById("custom-color-input"),o=document.getElementById("custom-color-preview"),d=document.getElementById("custom-color-hex");if(document.getElementById("safe-mode-button"),document.getElementById("safe-mode-status"),t&&a){t.addEventListener("click",e=>{e.preventDefault(),a.style.display="flex",setTimeout(()=>a.classList.add("is-visible"),10)});let c=()=>{a.classList.remove("is-visible"),setTimeout(()=>a.style.display="none",200)};i.addEventListener("click",c),a.addEventListener("click",e=>{e.target===a&&c()})}function _(t){e.classList.toggle("dark-mode",t),n.classList.toggle("active",!t),s.classList.toggle("active",t),localStorage.setItem("themeMode",t?"dark":"light")}function p(e,t=null){if(!e)return;let a=t||e,i=document.documentElement;i.style.setProperty("--keycolor",e),i.style.setProperty("--keygradient",a);let n=0,s=0,l=0;e.startsWith("#")&&7===e.length&&(n=parseInt(e.slice(1,3),16),s=parseInt(e.slice(3,5),16),l=parseInt(e.slice(5,7),16)),i.style.setProperty("--keycolor-rgb",n+","+s+","+l),localStorage.setItem("themeColor",e),localStorage.setItem("themeGradient",a),o&&(o.style.background=a),d&&(d.textContent=e),document.querySelectorAll(".ts-swatch").forEach(e=>e.classList.remove("active"));let r=document.querySelector('.ts-swatch[data-color="'+e+'"]');r&&r.classList.add("active")}n&&s&&(n.addEventListener("click",()=>_(!1)),s.addEventListener("click",()=>_(!0)),_("dark"===localStorage.getItem("themeMode")));let m=localStorage.getItem("themeColor"),u=localStorage.getItem("themeGradient");function g(e){let t=document.getElementById("safe-mode-status"),a=document.getElementById("safe-mode-status-mobile");localStorage.setItem("matureFilterActive",e),document.body.classList.toggle("mature-filter-active",e);let i=e?"On":"Off";t&&(t.textContent=i),a&&(a.textContent=i)}m?p(m,u):p("#c8204e","linear-gradient(to right, #c8204e, #9a1ba7)"),l.forEach(e=>e.addEventListener("click",()=>p(e.dataset.color,e.dataset.gradient))),r&&r.addEventListener("input",()=>p(r.value));g("true"===localStorage.getItem("matureFilterActive")),document.body.addEventListener("click",function(e){if(e.target.closest("#safe-mode-button, #safe-mode-button-mobile")){e.preventDefault();g("true"!==localStorage.getItem("matureFilterActive"))}});let h=document.getElementById("comments");h&&h.addEventListener("click",function(e){let t=e.target.closest(".qa-footer");if(t){e.preventDefault();let a=t.closest(".qa-card");if(a){let i=document.querySelector('.comment[data-qa-id="'+a.dataset.qaId+'"]');if(i){let n=i.querySelector(".comment-actions a.comment-reply");n&&n.click()}}}});let v=document.getElementById("sidebarToggle");setTimeout(()=>{e.classList.remove("no-transition")},100),v&&v.addEventListener("click",()=>{e.classList.toggle("sidebar-collapsed"),localStorage.setItem("sidebarState",e.classList.contains("sidebar-collapsed")?"collapsed":"expanded"),setTimeout(function(){"undefined"!=typeof $&&$.fn.owlCarousel&&$("#dynamic-main-slider, #PopularPosts1 .owl-carousel").trigger("refresh.owl.carousel")},350)});let f=[].slice.call(document.querySelectorAll(".lazy-bg"));if("IntersectionObserver"in window){let y=new IntersectionObserver(function(e,t){e.forEach(function(e){if(e.isIntersecting){let t=e.target,a=t.getAttribute("data-bg-image");a&&(t.style.backgroundImage="url("+a+")",t.classList.remove("lazy-bg"),y.unobserve(t))}})},{rootMargin:"0px 0px 200px 0px"});f.forEach(function(e){y.observe(e)})}else f.forEach(function(e){let t=e.getAttribute("data-bg-image");t&&(e.style.backgroundImage="url("+t+")")})}),function(e){e(document).ready(function(){!function e(){let t=document.getElementById("popular-posts-carousel");if(!t){console.log("Ranking Number script: Carousel not found.");return}let a=()=>{t.querySelectorAll(".owl-item .index-post").forEach((e,t)=>{if(e.querySelector(".ranking-number"))return;let a=e.querySelector(".entry-image-wrap");if(a){let i=document.createElement("span");i.className="ranking-number",i.textContent=t+1,a.prepend(i)}})};new MutationObserver((e,t)=>{for(let i of e)"childList"===i.type&&i.addedNodes.length>0&&a()}).observe(t,{childList:!0,subtree:!0}),a()}();let t=document.getElementById("filtered-posts-wrap");if(!t)return;let a=function(t){let a=e(t).find("button.owl-prev"),i=e(t).find("button.owl-next");a.length&&(a.removeAttr("role"),a.attr("aria-label","Previous Posts")),i.length&&(i.removeAttr("role"),i.attr("aria-label","Next Posts"))};new MutationObserver(function(e){for(let t of e)"childList"===t.type&&t.addedNodes.length>0&&t.addedNodes.forEach(function(e){1===e.nodeType&&a(e)})}).observe(t,{childList:!0,subtree:!0})})}(jQuery),document.addEventListener("DOMContentLoaded",function(){let e=window.innerWidth<=767,t=window.location.pathname.includes("/p/my-account.html"),n=document.querySelector(".post-page-final-container"),s="abefilm_simple_user",l=document.getElementById("theme-icon-source"),r=l?l.dataset.guestIcon:"",o=l?l.dataset.userIcon:"",d=l?l.dataset.loggedOutIcon:"",c=document.getElementById("generic-modal"),_=document.getElementById("toastNotification"),p=document.getElementById("toastMessage");if(c){let m=document.getElementById("generic-modal-title"),u=document.getElementById("generic-modal-message"),g=document.getElementById("generic-modal-input"),h=document.getElementById("generic-modal-ok"),v=document.getElementById("generic-modal-cancel"),f=null;window.hideGenericModal=function(){c.classList.remove("is-visible"),f=null},window.showCustomConfirm=function(e,t,a){m.textContent=e,u.textContent=t,g.classList.add("is-hidden"),v.style.display="inline-block",h.textContent="OK",f=a,c.classList.add("is-visible")},window.showCustomAlert=function(e,t){m.textContent=e,u.textContent=t,g.classList.add("is-hidden"),v.style.display="none",h.textContent="OK",f=null,c.classList.add("is-visible")},window.showCustomPrompt=function(e,t,a,i){m.textContent=e,u.textContent=t,g.value=a,g.classList.remove("is-hidden"),v.style.display="inline-block",h.textContent="Save",f=i,c.classList.add("is-visible"),setTimeout(()=>g.focus(),100)},h.addEventListener("click",()=>{"function"==typeof f&&f(g.value),hideGenericModal()}),v.addEventListener("click",hideGenericModal),c.addEventListener("click",e=>{e.target===c&&hideGenericModal()})}if(n){if(e){document.body.classList.add("item-view");let y=document.querySelector(".recommendation-section"),b=document.querySelector(".abefilm-blog-post-comments"),w=document.querySelector(".mobile-reaction-title"),k=document.querySelector(".reaction-container"),C=document.querySelector(".review-system-container"),L=document.getElementById("video-tab-content"),x=document.getElementById("comment-tab-content");y&&L&&L.appendChild(y),x&&(w&&x.appendChild(w),k&&x.appendChild(k),C&&x.appendChild(C),b&&x.appendChild(b));let E=document.querySelectorAll(".mobile-tab-btn"),S=document.querySelectorAll(".mobile-tab-panel");E.length>0&&S.length>0&&E.forEach(function(e){e.addEventListener("click",function(){let t=e.getAttribute("data-tab-target"),a=document.querySelector(t);a&&(E.forEach(e=>e.classList.remove("active")),S.forEach(e=>e.classList.remove("active")),e.classList.add("active"),a.classList.add("active"),document.body.classList.toggle("comment-tab-active","#comment-tab-content"===t))})})}if(e){let I=document.getElementById("mobile-comment-trigger");if(I){let M=I.querySelector(".trigger-discussion-link"),B=I.querySelector(".trigger-rating-link"),q=document.getElementById("close-comment-form");M&&q&&(M.addEventListener("click",e=>{e.preventDefault(),document.body.classList.add("comment-form-active")}),q.addEventListener("click",()=>{document.body.classList.remove("comment-form-active")})),B&&B.addEventListener("click",e=>{e.preventDefault(),document.getElementById("review-system")?.scrollIntoView({behavior:"smooth",block:"center"})})}}if(e&&document.body.classList.contains("item-view")){let A=document.querySelector(".player-column-final"),H=document.querySelector(".comment-form");if(A&&H){let T=function(){H.style.top=A.offsetHeight+"px"};T(),window.addEventListener("resize",T)}}if(e){let j=document.querySelector("#celebrity-data"),z=document.getElementById("video-tab-content");if(j&&z){let F=j.querySelectorAll("li");if(F.length>0){let D=document.createElement("div");D.className="section-final mobile-celebrity-section";let V=document.createElement("h3");V.textContent="Cast",D.appendChild(V);let P=document.createElement("div");P.className="celebrity-carousel-mobile",F.forEach(e=>{let t=e.querySelector("img")?.src||"",a=e.querySelector("span")?.textContent||"";P.innerHTML+='\n                <div class="celebrity-item-mobile">\n                  <img src="'+t+'" alt="'+a+'" loading="lazy"/>\n                  <span class="name">'+a+"</span>\n                </div>"}),D.appendChild(P);let W=z.querySelector(".recommendation-section");W?z.insertBefore(D,W):z.appendChild(D)}}}if(e){let R=document.querySelector("#post-page-sidebar #HTML8"),N=document.getElementById("video-tab-content");if(R&&N){let G=N.querySelector(".recommendation-section");G?N.insertBefore(R,G):N.appendChild(R)}}}let U=document.getElementById("comments");if(U){let O=function(){let e=document.getElementById("top-ce"),t=document.querySelector(".comments .comment-form");e&&t&&(t.appendChild(e),clearInterval(Y))},Z=document.getElementById("comment-helper");Z&&new MutationObserver(e=>{for(let t of e)for(let a of t.addedNodes)if(1===a.nodeType&&"comment-editor"===a.id){a.parentNode&&a.parentNode.insertBefore(Z,a);return}}).observe(U,{childList:!0,subtree:!0});let K=document.getElementById("sort-select"),J=document.getElementById("top-ra");K&&J&&K.addEventListener("change",function(){J.style.flexDirection="newest"===this.value?"column-reverse":"column"});let Y=setInterval(O,100);setTimeout(()=>{clearInterval(Y)},1e4);let Q=document.querySelector(".comment-count-badge");if(Q)try{let X=parseInt(Q.textContent,10);isNaN(X)||(X>=1e3?Q.textContent=(X/1e3).toFixed(1).replace(".0","")+"k":0!==X||(Q.style.display="none"))}catch(ee){console.error("Error formatting comment badge:",ee)}}let et="https://agfwyfwsnqnklgcgemnw.supabase.co";if("undefined"!=typeof supabase&&et.startsWith("http")){let ea=supabase.createClient(et,"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImFnZnd5ZndzbnFua2xnY2dlbW53Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTcyMTQ3MTQsImV4cCI6MjA3Mjc5MDcxNH0.NBWiC0YzG8zDhijQ17j49xVXUyLJYXlMJKJkfFJg5yg");(()=>{let e=document.getElementById("post-review-data");if(!e)return;if(!document.getElementById("rating-feedback-popup")){let t=document.createElement("div");t.id="rating-feedback-popup",t.className="rating-feedback-container",t.innerHTML='<div class="feedback-content"><h3 class="popup-text">You rated</h3><div class="popup-stars" id="popup-stars-content"></div></div>',document.body.appendChild(t)}let a=e.getAttribute("data-post-id"),i="sb_rated_"+a,n=document.getElementById("review-summary-wrapper"),s=null,l=localStorage.getItem("supabase_client_id");l||(l=self.crypto.randomUUID(),localStorage.setItem("supabase_client_id",l));let r=e=>e>=1e3?(e/1e3).toFixed(e%1e3!=0?1:0)+"K":e,o=()=>{let e=document.getElementById("rating-shortcut-text");e&&(e.textContent=null!==localStorage.getItem(i)?"My rating":"Rate now")},d=e=>{s=e;let t=localStorage.getItem(i),a=null!==t,l=e?.total_ratings||0,o=e?.average_rating||0,d=e?.rating_counts||{1:0,2:0,3:0,4:0,5:0},c="",_="";for(let p=1;p<=5;p++)c+='<span class="star '+(p<=Math.round(o)?"filled":"")+'" data-value="'+p+'">&#9733;</span>';for(let m=5;m>=1;m--)_+='<div class="breakdown-row"><span>'+m+'.0</span><div class="progress-bar-container"><div class="progress-bar" style="width:'+(l>0?(d[String(m)]||0)/l*100:0)+'%;"></div></div><span class="review-count">'+(d[String(m)]||0)+" reviews</span></div>";n.innerHTML='<div class="review-summary-left"><div class="average-rating-score">'+o.toFixed(1)+'</div><div><div class="average-rating-stars '+(a?"rated":"")+'" id="interactive-stars">'+c+'</div><div class="total-ratings">'+r(l)+' ratings</div></div></div><div class="review-summary-right">'+_+"</div>";let u=document.getElementById("user-rating-display-container");if(u||((u=document.createElement("div")).id="user-rating-display-container",n.after(u)),a){let g=parseInt(t,10),h="";for(let v=1;v<=5;v++)h+=v<=g?'<span class="star filled">&#9733;</span>':'<span class="star">&#9734;</span>';u.innerHTML='<div class="user-rating-display"><span>You rated:</span><div>'+h+"</div></div>"}else u.innerHTML=""},c=async()=>{let{data:e,error:t}=await ea.from("review_summaries").select("*").eq("post_id",a).single();t&&"PGRST116"!==t.code&&console.error("Supabase Error:",t),d(e),o()},_=e=>{let t=document.getElementById("rating-feedback-popup"),a=t.querySelector(".feedback-content"),i=document.getElementById("popup-stars-content");if(t&&i){a.querySelectorAll(".sparkle").forEach(e=>e.remove()),i.innerHTML=Array.from({length:5},(t,a)=>a<e?'<span class="star-filled">&#9733;</span>':'<span class="star-empty">&#9734;</span>').join("");for(let n=0;n<12;n++){let s=document.createElement("div");s.className="sparkle";let l=360*Math.random(),r=80*Math.random()+60,o=Math.cos(l*Math.PI/180)*r,d=Math.sin(l*Math.PI/180)*r;s.style.setProperty("--sparkle-transform-end","translate("+o+"px, "+d+"px)"),s.style.animationDelay=.3*Math.random()+"s",a.appendChild(s)}t.classList.add("show"),setTimeout(()=>t.classList.remove("show"),2500)}},p=async e=>{if(null!==localStorage.getItem(i))return;_(e),localStorage.setItem(i,e),o();let t=s?.total_ratings||0,n=(s?.average_rating||0)*t,r=s?.rating_counts||{1:0,2:0,3:0,4:0,5:0};d({total_ratings:t+1,average_rating:(n+e)/(t+1),rating_counts:{...r,[String(e)]:(r[String(e)]||0)+1}});let p={post_id:a,rating:e,client_id:l},{error:m}=await ea.from("reviews").insert(p);m&&(console.error("Error submitting review:",m),localStorage.removeItem(i),c())};n.addEventListener("click",e=>{let t=e.target.closest(".star"),a=e.target.closest(".average-rating-stars");t&&a&&!a.classList.contains("rated")&&p(parseInt(t.getAttribute("data-value")))}),c()})(),(()=>{let e=document.getElementById("post-review-data")||document.getElementById("post-id"),t=document.getElementById("reaction-container");if(!e||!t)return;let a=e.getAttribute("data-post-id");if(!a){console.error("Reaction system: Post ID not found.");return}let i="sb_reacted_"+a,n=[{type:"like",label:"Upvote",icon:"\uD83D\uDC4D"},{type:"love",label:"Love",icon:"\uD83D\uDE0D"},{type:"haha",label:"Funny",icon:"\uD83D\uDE06"},{type:"wow",label:"Surprised",icon:"\uD83D\uDE32"},{type:"sad",label:"Sad",icon:"\uD83D\uDE22"},{type:"angry",label:"Angry",icon:"\uD83D\uDE24"}],s=localStorage.getItem("supabase_client_id");s||(s=self.crypto.randomUUID(),localStorage.setItem("supabase_client_id",s));let l={},r=null,o=(e,a)=>{t.innerHTML=n.map(t=>{let i=e?.[t.type]||0;return'<button class="reaction-btn '+(a===t.type?"selected":"")+'" data-reaction="'+t.type+'"><div class="reaction-icon-wrapper"><span class="reaction-icon">'+t.icon+'</span><span class="reaction-count">'+(i>0?i:"")+'</span></div><span class="reaction-label">'+t.label+"</span></button>"}).join("")},d=async()=>{try{let[e,t]=await Promise.all([ea.from("reaction_summaries").select("counts").eq("post_id",a).single(),ea.from("reactions").select("reaction_type").eq("post_id",a).eq("client_id",s).single()]);l=e.data?.counts||{},(r=t.data?.reaction_type||null)?localStorage.setItem(i,r):localStorage.removeItem(i),o(l,r)}catch(n){console.error("Error fetching reaction data:",n)}},c=async e=>{let t=r;t===e?(l[t]&&l[t]--,r=null,localStorage.removeItem(i)):(t&&l[t]&&l[t]--,l[e]=(l[e]||0)+1,r=e,localStorage.setItem(i,e)),o(l,r);try{let n={post_id:a,client_id:s};t===e?await ea.from("reactions").delete().match(n):await ea.from("reactions").upsert({post_id:a,client_id:s,reaction_type:e},{onConflict:"post_id, client_id"})}catch(c){console.error("Error updating reaction:",c),await d()}};t.addEventListener("click",e=>{let t=e.target.closest(".reaction-btn");t&&c(t.dataset.reaction)}),d()})()}else console.warn("Supabase client not loaded or configured. Interactive features will be disabled.");let ei=document.getElementById("watchlist-container");if(ei){let en=function(e){ed.innerHTML="";let t=document.querySelector(".sidebar-logo .logo-text")?.textContent.trim()||"";for(let a=0;a<e;a++)ed.innerHTML+='<div class="skeleton-grid-item"><div class="skeleton-poster">'+t+'</div><div class="skeleton-info"><div class="skeleton-line title"></div><div class="skeleton-line type"></div></div></div>';ed.style.display="grid",ec.style.display="none"},es=function(e,t){e0&&(em.has(e)?(em.delete(e),t.classList.remove("selected")):(em.add(e),t.classList.add("selected")),er())},el=function(e){e0=void 0!==e?e:!e0,ei.classList.toggle("edit-mode",e0),em.clear(),e$.checked=!1,eu()},er=function(){ep.disabled=0===em.size,ep.style.opacity=0===em.size?.5:1;let e=document.querySelectorAll(".watchlist-item");e$.checked=e.length>0&&em.size===e.length},eo="abefilmUserWatchlist",ed=ei.querySelector("#watchlist-grid"),ec=ei.querySelector("#watchlist-empty-state"),e_=ei.querySelector("#edit-watchlist-btn"),e1=ei.querySelector("#cancel-edit-btn"),ep=ei.querySelector("#delete-selected-btn"),e$=ei.querySelector("#select-all-checkbox"),e0=!1,em=new Set;async function eu(){let e=[];try{e=JSON.parse(localStorage.getItem(eo))||[]}catch{}0===e.length?(ec.style.display="flex",ed.style.display="none",ei.classList.remove("has-content"),el(!1),e_.style.display="none"):(ec.style.display="none",ei.classList.add("has-content"),en(e.length),e_.style.display="block");let t=await Promise.all(e.map(e=>fetch(e.url).then(e=>e.ok?e.text():null).then(t=>{if(!t)return e;let a=new DOMParser().parseFromString(t,"text/html"),i=a.querySelector('img[alt="poster"]')?.src,n=a.querySelector("#extra-meta .meta-type")?.textContent.trim();return{...e,poster:i||e.image,type:n||"Movie"}}).catch(()=>e)));e.length>0&&(ed.innerHTML="",t.forEach(e=>{let t=document.createElement("div");t.className="watchlist-item grid-item",t.dataset.id=e.id,t.innerHTML='<a href="'+(e0?"javascript:void(0);":e.url||"#")+'" class="poster-wrapper" title="'+e.title+'"><img src="'+e.poster+'" alt="'+e.title+'" class="poster"><div class="play-icon-overlay"><svg class="play-button" viewBox="0 0 60 60"><g fill="none"><circle fill="var(--keycolor)" cx="30" cy="30" r="30"></circle><path d="M35.75,22.5 L45.14,36.58 C46.06,37.96 45.69,39.83 44.31,40.75 C43.82,41.07 43.24,41.25 42.64,41.25 L23.86,41.25 C22.20,41.25 20.86,39.91 20.86,38.25 C20.86,37.66 21.03,37.08 21.36,36.59 L30.75,22.5 C31.67,21.12 33.54,20.74 34.91,21.66 C35.24,21.88 35.53,22.16 35.75,22.5 Z" fill="#FFFFFF" transform="translate(33.25, 30) rotate(-270) translate(-33.25, -30)"></path></g></svg></div><div class="selection-overlay"><div class="checkmark"><i class="fas fa-check"></i></div></div></a><div class="item-info"><div class="title">'+e.title+'</div><p class="type">'+e.type+"</p></div>",ed.appendChild(t),t.querySelector(".poster-wrapper").addEventListener("click",a=>{e0&&(a.preventDefault(),es(e.id,t))})})),er()}e_.addEventListener("click",()=>el(!0)),e1.addEventListener("click",()=>el(!1)),e$.addEventListener("change",()=>{let e=e$.checked;document.querySelectorAll(".watchlist-item").forEach(t=>{let a=t.dataset.id,i=em.has(a);e&&!i?(em.add(a),t.classList.add("selected")):!e&&i&&(em.delete(a),t.classList.remove("selected"))}),er()}),ep.addEventListener("click",()=>{0!==em.size&&showCustomConfirm("Delete Items","Are you sure you want to delete "+em.size+" selected item(s)?",()=>{let e=(JSON.parse(localStorage.getItem(eo))||[]).filter(e=>!em.has(e.id));localStorage.setItem(eo,JSON.stringify(e)),"function"==typeof window.renderWatchlistPanel&&window.renderWatchlistPanel(),"function"==typeof window.updateWatchlistBadge&&window.updateWatchlistBadge(),el(!1)})}),eu(),window.addEventListener("storage",e=>{e.key===eo&&eu()})}let eg=document.getElementById("history-container");if(eg){let eh=function(e){ey.innerHTML="";let t=document.querySelector(".sidebar-logo .logo-text")?.textContent.trim()||"";for(let a=0;a<e;a++)ey.innerHTML+='<div class="skeleton-grid-item"><div class="skeleton-poster">'+t+'</div><div class="skeleton-info"><div class="skeleton-line title"></div><div class="skeleton-line type"></div></div></div>';ey.style.display="grid",e3.style.display="none"},ev=function(e,t){ew&&(ek.has(String(e))?(ek.delete(String(e)),t.classList.remove("selected")):(ek.add(String(e)),t.classList.add("selected")),e4())},ef=function(e){ew=void 0!==e?e:!ew,eg.classList.toggle("edit-mode",ew),ek.clear(),eb.checked=!1,eC()},e4=function(){e7.disabled=0===ek.size,e7.style.opacity=0===ek.size?.5:1;let e=document.querySelectorAll(".history-item");eb.checked=e.length>0&&ek.size===e.length},e2="watchHistoryIDs",ey=eg.querySelector("#history-grid"),e3=eg.querySelector("#history-empty-state"),e5=eg.querySelector("#edit-history-btn"),e6=eg.querySelector("#cancel-edit-btn"),e7=eg.querySelector("#delete-selected-btn"),eb=eg.querySelector("#select-all-checkbox"),ew=!1,ek=new Set;async function eC(){let e=[];try{e=JSON.parse(localStorage.getItem(e2))||[]}catch{}let t=JSON.parse(localStorage.getItem("abefilmWatchProgress")||"{}");0===e.length?(e3.style.display="flex",ey.style.display="none",eg.classList.remove("has-content"),ef(!1),e5.style.display="none"):(e3.style.display="none",eg.classList.add("has-content"),eh(e.length),e5.style.display="block");let a=(await Promise.all(e.map(e=>fetch("/feeds/posts/default/"+e+"?alt=json").then(e=>e.ok?e.json():null).then(a=>{if(!a||!a.entry)return null;let i=a.entry,n=document.createElement("div");n.innerHTML=i.content.$t;let s=n.querySelector("span.slider-backdrop")?.textContent.trim(),l=n.querySelector('img[alt="poster"]')?.src,r=n.querySelector("#extra-meta .meta-type")?.textContent.trim(),o=n.querySelector("#episodes-data ul[data-server-name]"),d=o?o.querySelectorAll("a").length:0,c=t["post-"+e]||0,_=0;return d>1?_=(c+1)/d*100:(1===d||0===d&&"TV Series"!==r)&&(_=100),{id:e,url:i.link.find(e=>"alternate"===e.rel).href,title:i.title.$t,image:s||l,type:r||"Movie",progressPercent:_}}).catch(()=>null)))).filter(Boolean);a.length>0&&(ey.innerHTML="",a.forEach(e=>{let t=document.createElement("div");t.className="history-item grid-item",t.dataset.id=e.id,t.innerHTML='<a href="'+(ew?"javascript:void(0);":e.url||"#")+'" class="poster-wrapper"><img src="'+e.image+'" alt="'+e.title+'" class="poster"><div class="play-icon-overlay"><svg class="play-button" viewBox="0 0 60 60"><g fill="none"><circle fill="var(--keycolor)" cx="30" cy="30" r="30"></circle><path d="M35.75,22.5 L45.14,36.58 C46.06,37.96 45.69,39.83 44.31,40.75 C43.82,41.07 43.24,41.25 42.64,41.25 L23.86,41.25 C22.20,41.25 20.86,39.91 20.86,38.25 C20.86,37.66 21.03,37.08 21.36,36.59 L30.75,22.5 C31.67,21.12 33.54,20.74 34.91,21.66 C35.24,21.88 35.53,22.16 35.75,22.5 Z" fill="#FFFFFF" transform="translate(33.25, 30) rotate(-270) translate(-33.25, -30)"></path></g></svg></div><div class="selection-overlay"><div class="checkmark"></div></div><div class="progress-bar-overlay"><div class="progress-bar-fill" style="width: '+e.progressPercent+'%;"></div></div></a><div class="item-info"><div class="title">'+e.title+'</div><p class="type">'+e.type+"</p></div>",ey.appendChild(t),t.querySelector(".poster-wrapper").addEventListener("click",a=>{ew&&(a.preventDefault(),ev(e.id,t))})})),e4()}e5.addEventListener("click",()=>ef(!0)),e6.addEventListener("click",()=>ef(!1)),eb.addEventListener("change",()=>{let e=document.querySelectorAll(".history-item");eb.checked?e.forEach(e=>{e.classList.contains("selected")||ev(e.dataset.id,e)}):e.forEach(e=>{e.classList.contains("selected")&&ev(e.dataset.id,e)})}),e7.addEventListener("click",()=>{0!==ek.size&&showCustomConfirm("Delete History","Are you sure you want to delete "+ek.size+" selected item(s) from your history?",()=>{let e=(JSON.parse(localStorage.getItem(e2))||[]).filter(e=>!ek.has(String(e)));localStorage.setItem(e2,JSON.stringify(e)),"function"==typeof window.displayHistory&&window.displayHistory(),"function"==typeof window.updateHistoryBadge&&window.updateHistoryBadge(),ef(!1)})}),eC(),window.addEventListener("storage",e=>{e.key===e2&&eC()})}let eL=document.getElementById("favorites-container");if(eL){let ex=function(e){eB.innerHTML="";for(let t=0;t<e;t++)eB.innerHTML+='<div class="skeleton-list-item"><div class="skeleton-poster"></div><div class="skeleton-details"><div class="skeleton-line title"></div><div class="skeleton-line meta"></div><div class="skeleton-line text"></div><div class="skeleton-line text short"></div><div class="skeleton-line button"></div></div></div>';eB.style.display="grid",eq.style.display="none"},eE=function(e,t,a){ez&&(a?(e8.add(String(e)),t.classList.add("selected")):(e8.delete(String(e)),t.classList.remove("selected")),eI())},eS=function(e){ez=void 0!==e?e:!ez,eL.classList.toggle("edit-mode",ez),ez||(e8.clear(),ej&&(ej.checked=!1),document.querySelectorAll(".favorite-item.selected").forEach(e=>{e.classList.remove("selected");let t=e.querySelector(".item-checkbox");t&&(t.checked=!1)})),eI()},eI=function(){if(!eT)return;eT.disabled=0===e8.size,eT.style.opacity=0===e8.size?.5:1;let e=document.querySelectorAll(".favorite-item");ej&&(ej.checked=e.length>0&&e8.size===e.length)},eM="abefilm_favorites",eB=eL.querySelector("#favorites-list"),eq=eL.querySelector("#favorites-empty-state"),eA=eL.querySelector("#edit-favorites-btn"),eH=eL.querySelector("#cancel-edit-btn"),eT=eL.querySelector("#delete-selected-btn"),ej=eL.querySelector("#select-all-checkbox"),ez=!1,e8=new Set;async function eF(){let e=[];try{e=JSON.parse(localStorage.getItem(eM))||[]}catch{}0===e.length?(eq.style.display="flex",eB.style.display="none",eL.classList.remove("has-content"),eS(!1),eA&&(eA.style.display="none")):(eq.style.display="none",eL.classList.add("has-content"),ex(e.length),eA&&(eA.style.display="block"));let t=(await Promise.all(e.map(e=>fetch("/feeds/posts/default/"+e+"?alt=json").then(e=>e.ok?e.json():null).then(t=>{if(!t||!t.entry)return null;let a=t.entry,i=document.createElement("div");i.innerHTML=a.content.$t;let n=i.querySelector('img[alt="poster"]')?.src,s=i.querySelector("#extra-meta .meta-type")?.textContent.trim(),l=i.querySelector("#extra-meta .meta-year")?.textContent.trim(),r=i.querySelector("#extra-meta .meta-rating")?.textContent.trim(),o=i.querySelector("#overview-data")?.textContent.trim();return{id:e,url:a.link.find(e=>"alternate"===e.rel).href,title:a.title.$t,poster:n,type:s,year:l,rating:r,synopsis:o}}).catch(()=>null)))).filter(Boolean);t.length>0&&(eB.innerHTML="",t.forEach(e=>{let t=document.createElement("div");t.className="favorite-item",t.dataset.id=e.id,t.innerHTML='<a href="'+e.url+'" class="item-poster-link"><img src="'+e.poster+'" alt="'+e.title+'"></a><div class="item-details"><div class="title-wrapper"><h3 class="title">'+e.title+'</h3><label class="selection-checkbox-wrapper"><input type="checkbox" class="item-checkbox" data-id="'+e.id+'"><span class="custom-checkbox"></span></label></div><div class="item-meta">'+(e.rating?'<span class="rating"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16" style="vertical-align: text-bottom;"><path d="M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L.173 6.765c-.329-.314-.158-.888.283-.95l4.898-.696L7.538.792c.197-.39.73-.39.927 0l2.184 4.327 4.898.696c.441.062.612.636.282.95l-3.522 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z"/></svg> '+e.rating+"</span>":"")+(e.year?"<span>"+e.year+"</span>":"")+(e.type?"<span>"+e.type+"</span>":"")+'</div><p class="item-synopsis">'+(e.synopsis||"")+'</p><div class="item-actions"><a href="'+e.url+'" class="btn play-btn"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" viewBox="0 0 16 16" style="vertical-align: -2px;"><path d="M10.804 8 5 4.633v6.734L10.804 8zm.792-.696a.802.802 0 0 1 0 1.392l-6.363 3.692C4.713 12.69 4 12.345 4 11.692V4.308c0-.653.713-.998 1.233-.696l6.363 3.692z"/></svg> Play</a></div></div>',eB.appendChild(t);let a=t.querySelector(".item-checkbox");t.addEventListener("click",t=>{ez?t.target.closest("a")||(t.preventDefault(),a.checked=!a.checked,a.dispatchEvent(new Event("change"))):t.target.closest("a")||(window.location.href=e.url)}),a.addEventListener("change",()=>{eE(e.id,t,a.checked)})})),eI()}eA&&eA.addEventListener("click",()=>eS(!0)),eH&&eH.addEventListener("click",()=>eS(!1)),ej&&ej.addEventListener("change",()=>{let e=ej.checked;document.querySelectorAll(".item-checkbox").forEach(t=>{t.checked!==e&&(t.checked=e,t.dispatchEvent(new Event("change")))})}),eT&&eT.addEventListener("click",()=>{0!==e8.size&&showCustomConfirm("Delete Favorites","Are you sure you want to delete "+e8.size+" selected item(s)?",()=>{let e=(JSON.parse(localStorage.getItem(eM))||[]).filter(e=>!e8.has(String(e)));localStorage.setItem(eM,JSON.stringify(e)),eS(!1),eF()})}),eF(),window.addEventListener("storage",e=>{e.key===eM&&eF()})}if(t){let eD=document.getElementById("my-account-app");if(eD){let eV=function(){let e=0;for(let t in localStorage)localStorage.hasOwnProperty(t)&&(e+=(localStorage[t].length+t.length)*2);for(let a in sessionStorage)sessionStorage.hasOwnProperty(a)&&(e+=(sessionStorage[a].length+a.length)*2);return e<1024?"0 KB":e<1048576?(e/1024).toFixed(2)+" KB":(e/1048576).toFixed(2)+" MB"},eP=function(){let e=eV(),t=document.querySelector("#clear-cache-btn span");t&&(t.textContent=e)},eW=function(){let e=JSON.parse(localStorage.getItem(s)),t=document.querySelector(".account-profile-section");if(e&&e.name){t.classList.remove("is-logged-out");let a=!!e.isGuest,i=a?r:e.avatar||o;eK.src=i,eJ.innerHTML=e.name,eY.textContent=e.name,eQ.src=i,eX.style.display="block",te.style.display="flex",tt.style.display="flex",ta.style.display="flex",ti.style.display="block";let n=document.querySelector("#edit-username-btn svg"),l=document.querySelector("#edit-avatar-btn svg");if(tn.style.cursor=a?"default":"pointer",tr.style.cursor=a?"default":"pointer",n&&(n.style.display=a?"none":"inline-block"),l&&(l.style.display=a?"none":"inline-block"),"a"!==t.tagName.toLowerCase()||!t.href.includes("/p/my-account.html")){let c=document.createElement("a");for(c.href="/p/my-account.html",c.className=t.className;t.firstChild;)c.appendChild(t.firstChild);t.parentNode.replaceChild(c,t)}}else if(t.classList.add("is-logged-out"),eK.src=d,eJ.innerHTML='Login <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" style="width: 0.8em; height: 0.8em; vertical-align: middle; margin-left: 4px;"><path d="M9 18l6-6-6-6"/></svg>',eY.textContent="Not logged in",eX.style.display="block",te.style.display="flex",tt.style.display="none",ti.style.display="none",ta.style.display="none","a"!==t.tagName.toLowerCase()||"showLoginModalBtn"!==t.id){let _=document.createElement("a");for(_.href="#",_.id="showLoginModalBtn",_.className=t.className;t.firstChild;)_.appendChild(t.firstChild);t.parentNode.replaceChild(_,t)}let p={watchlist:(JSON.parse(localStorage.getItem("abefilmUserWatchlist"))||[]).length,history:(JSON.parse(localStorage.getItem("watchHistoryIDs"))||[]).length,favorite:(JSON.parse(localStorage.getItem("abefilm_favorites"))||[]).length};for(let m in p){let u=p[m],g=document.querySelector('.item-count[data-count-for="'+m+'"]');g&&(u>0?(g.textContent=u,g.style.display="inline-block"):g.style.display="none")}eP()},eR=function(e,t){t_.innerHTML="";let a=t[e];a&&(a.avatars.forEach(e=>{let t=document.createElement("div");t.className="avatar-choice",t.innerHTML='<img src="'+e+'" alt="Avatar">',t.addEventListener("click",()=>eN(e)),t_.appendChild(t)}),document.querySelectorAll(".avatar-category-tab").forEach((t,a)=>t.classList.toggle("active",a===e)))},eN=function(e){let t=JSON.parse(localStorage.getItem(s));t&&!t.isGuest&&(t.avatar=e,localStorage.setItem(s,JSON.stringify(t)),sessionStorage.setItem("showToastAfterReload","Avatar updated successfully."),location.reload())},e9=function(){to.classList.add("is-visible")},eG=function(){to.classList.remove("is-visible")},eU=document.getElementById("community-section-source");eD.innerHTML='<div class="account-page-container"><div class="account-profile-section"><div class="account-profile-avatar-wrapper"><img id="account-page-avatar-img" src="" alt="User Avatar" /></div><div class="account-profile-info"><h2 id="account-page-name" class="account-profile-name"></h2></div></div><div class="account-list-section" id="account-section-header"><h3 class="section-header">Account</h3><div class="account-list-item" id="username-list-item"><span class="item-label"><svg fill="#fff" width="20px" height="20px" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><path id="secondary" d="M3.29,16.09,8.2,21H11V18.2L6.09,13.29a1,1,0,0,0-1.4,0l-1.4,1.4A1,1,0,0,0,3.29,16.09Z" style="fill: none; stroke: var(--keycolor); stroke-linecap: round; stroke-linejoin: round; stroke-width: 2;"></path><path id="primary" d="M13,13h1a7,7,0,0,1,7,7,1,1,0,0,1-1,1H15" style="fill: none; stroke: #fff; stroke-linecap: round; stroke-linejoin: round; stroke-width: 2;"></path><circle id="primary-2" data-name="primary" cx="13" cy="8" r="5" style="fill: none; stroke: #fff; stroke-linecap: round; stroke-linejoin: round; stroke-width: 2;"></circle></g></svg> Username</span><a href="javascript:void(0)" class="item-action" id="edit-username-btn"><span id="account-page-username-value" class="item-value"></span><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L10.293 8 4.646 2.354a.5.5 0 0 1 0-.708z"/></svg></a></div><div class="account-list-item" id="avatar-list-item"><span class="item-label"><svg fill="#fff" width="20px" height="20px" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><path id="secondary" d="M13,7.13A3.66,3.66,0,0,0,12,7a4,4,0,1,0,3.46,6" style="fill: none; stroke: var(--keycolor); stroke-linecap: round; stroke-linejoin: round; stroke-width: 2;"></path><path id="secondary-2" data-name="secondary" d="M12,15a5,5,0,0,0-5,4.5,9,9,0,0,0,9.94,0A5,5,0,0,0,12,15Zm5-6h4M19,7v4" style="fill: none; stroke: var(--keycolor); stroke-linecap: round; stroke-linejoin: round; stroke-width: 2;"></path><path id="primary" d="M20.48,15a8.86,8.86,0,0,1-2.12,3.36A9,9,0,1,1,16,3.94" style="fill: none; stroke: #fff; stroke-linecap: round; stroke-linejoin: round; stroke-width: 2;"></path></g></svg> Avatar</span><a href="javascript:void(0)" class="item-action avatar-action" id="edit-avatar-btn"><div class="item-avatar-preview"><img id="account-page-avatar-preview-img" src="" alt="Current Avatar" /></div><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L10.293 8 4.646 2.354a.5.5 0 0 1 0-.708z"/></svg></a></div></div><div class="account-list-section" id="my-content-section"><h3 class="section-header">My Content</h3><div class="account-list-item"><div class="item-label-group"><span class="item-label"><svg fill="#fff" width="20px" height="20px" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><polygon id="secondary" points="5.76 16.3 3 16.67 5 18.47 4.53 21 7 19.8 9.47 21 9 18.47 11 16.67 8.24 16.3 7 14 5.76 16.3" style="fill: none; stroke: var(--keycolor); stroke-linecap: round; stroke-linejoin: round; stroke-width: 2;"></polygon><path id="primary" d="M7,10V4A1,1,0,0,1,8,3h9l4,4V20a1,1,0,0,1-1,1H14" style="fill: none; stroke: #fff; stroke-linecap: round; stroke-linejoin: round; stroke-width: 2;"></path></g></svg> Watchlist</span><span class="item-count" data-count-for="watchlist"></span></div><a href="/p/watchlist.html" class="item-action"><span>View All</span><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L10.293 8 4.646 2.354a.5.5 0 0 1 0-.708z"/></svg></a></div><div class="account-list-item"><div class="item-label-group"><span class="item-label"><svg fill="#ffffff" width="20px" height="20px" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><polyline id="secondary" points="8 12 12 12 12 7" style="fill: none; stroke: var(--keycolor); stroke-linecap: round; stroke-linejoin: round; stroke-width: 2;"></polyline><path id="primary" d="M12,3a9,9,0,1,1-9,9" style="fill: none; stroke: #fff; stroke-linecap: round; stroke-linejoin: round; stroke-width: 2;"></path></g></svg> Watch History</span><span class="item-count" data-count-for="history"></span></div><a href="/p/history.html" class="item-action"><span>View All</span><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L10.293 8 4.646 2.354a.5.5 0 0 1 0-.708z"/></svg></a></div><div class="account-list-item"><div class="item-label-group"><span class="item-label"><svg fill="#fff" width="20px" height="20px" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><path id="secondary" d="M16.84,13.72l-.34.34-.34-.34a2.43,2.43,0,0,0-3.45,0,2.47,2.47,0,0,0,0,3.47l1,1L16.5,21l2.75-2.77,1-1a2.47,2.47,0,0,0,0,3.47A2.43,2.43,0,0,0,16.84,13.72Z" style="fill: none; stroke: var(--keycolor); stroke-linecap: round; stroke-linejoin: round; stroke-width: 2;"></path><path id="primary" d="M10,20H4a1,1,0,0,1-1-1V4A1,1,0,0,1,4,3h8.59a1,1,0,0,1,.7.29l3.42,3.42a1,1,0,0,1,.29.7V9" style="fill: none; stroke: #ffffff; stroke-linecap: round; stroke-linejoin: round; stroke-width: 2;"></path></g></svg> Favorite</span><span class="item-count" data-count-for="favorite"></span></div><a href="/p/favorite.html" class="item-action"><span>View All</span><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L10.293 8 4.646 2.354a.5.5 0 0 1 0-.708z"/></svg></a></div></div><div class="account-list-section"><h3 class="section-header">Settings & Data</h3><div class="account-list-item"><span class="item-label"><svg fill="#000000" width="20px" height="20px" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" class="icon flat-color"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><circle id="primary" cx="12" cy="12" r="10" style="fill: #fff;"></circle><path id="secondary" d="M22,12A10,10,0,0,1,12,22V2A10,10,0,0,1,22,12Z" style="fill: var(--keycolor);"></path></g></svg> Theme</span><a href="javascript:void(0)" class="item-action" id="open-theme-settings-modal-mobile"><span class="item-value">Customize</span><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L10.293 8 4.646 2.354a.5.5 0 0 1 0-.708z"/></svg></a></div><div class="account-list-item mobile-only-setting" id="safe-mode-button-mobile"><span class="item-label"><svg class=\'safe-mode-icon\' fill=\'none\' viewBox=\'0 0 24 24\' xmlns=\'http://www.w3.org/2000/svg\' style="width: 20px; height: 20px; stroke: #fff;"><path class=\'lightning\' d=\'M8.12901 11.1313L12.128 6.1907C12.4408 5.80431 13.027 6.0448 13.027 6.55951V10.3836C13.027 10.6919 13.2569 10.9419 13.5405 10.9419H15.4855C15.9274 10.9419 16.1629 11.5083 15.871 11.8689L11.872 16.8095C11.5592 17.1959 10.973 16.9554 10.973 16.4407V12.6167C10.973 12.3083 10.7431 12.0584 10.4595 12.0584H8.51449C8.07264 12.0584 7.83711 11.4919 8.12901 11.1313Z\' stroke-linecap=\'round\' stroke-linejoin=\'round\' stroke-width=\'1.5\'/><path class=\'shield\' d=\'M21 11.1835V8.28041C21 6.64041 21 5.82041 20.5959 5.28541C20.1918 4.75042 19.2781 4.49068 17.4507 3.97122C16.2022 3.61632 15.1016 3.18875 14.2223 2.79841C13.0234 2.26622 12.424 2.00012 12 2.00012C11.576 2.00012 10.9766 2.26622 9.77771 2.79841C8.89839 3.18875 7.79784 3.61619 6.54933 3.9711C4.72193 4.49056 3.80822 4.75029 3.40411 5.28529C3 5.82028 3 6.64029 3 8.28029V11.1833C3 16.8085 8.06277 20.1835 10.594 21.5194C11.2011 21.8398 11.5046 22 12 22C12.4954 22 12.7989 21.8398 13.406 21.5194C15.9372 20.1835 21 16.8085 21 11.1833Z\' stroke-linecap=\'round\' stroke-width=\'1.5\'/></svg> Safe Mode</span><a href="javascript:void(0)" class="item-action"><span class="item-value toggle-status" id="safe-mode-status-mobile">Off</span><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L10.293 8 4.646 2.354a.5.5 0 0 1 0-.708z"/></svg></a></div><div class="account-list-item"><span class="item-label"><svg fill="#fff" width="20px" height="20px" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><path id="secondary" d="M16,7V4a1,1,0,0,0-1-1H9A1,1,0,0,0,8,4V7m4,4v6" style="fill: none; stroke: var(--keycolor); stroke-linecap: round; stroke-linejoin: round; stroke-width: 2;"></path><path id="primary" d="M4,7H20M17.07,20.07,18,7H6l.93,13.07a1,1,0,0,0,1,.93h8.14A1,1,0,0,0,17.07,20.07Z" style="fill: none; stroke: #ffffff; stroke-linecap: round; stroke-linejoin: round; stroke-width: 2;"></path></g></svg> Clear Cache</span><a href="javascript:void(0)" class="item-action" id="clear-cache-btn"><span class="item-value">0 KB</span><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L10.293 8 4.646 2.354a.5.5 0 0 1 0-.708z"/></svg></a></div><div class="account-list-item" id="logout-list-item"><span class="item-label"><svg fill="#fff" width="20px" height="20px" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><polyline id="secondary" points="10 15 7 12 10 9" style="fill: none; stroke: var(--keycolor); stroke-linecap: round; stroke-linejoin: round; stroke-width: 2;"></polyline><line id="secondary-2" data-name="secondary" x1="7" y1="12" x2="21" y2="12" style="fill: none; stroke: var(--keycolor); stroke-linecap: round; stroke-linejoin: round; stroke-width: 2;"></line><path id="primary" d="M14,16v3a1,1,0,0,1-1,1H4a1,1,0,0,1-1-1V5A1,1,0,0,1,4,4h9a1,1,0,0,1,1,1V8" style="fill: none; stroke: #ffffff; stroke-linecap: round; stroke-linejoin: round; stroke-width: 2;"></path></g></svg> Logout</span><a href="javascript:void(0)" class="item-action" id="account-page-logout-btn"><span class="item-value">Proceed</span><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L10.293 8 4.646 2.354a.5.5 0 0 1 0-.708z"/></svg></a></div></div></div>';let eO="true"===localStorage.getItem("matureFilterActive"),eZ=document.getElementById("safe-mode-status-mobile");eZ&&(eZ.textContent=eO?"On":"Off"),eU&&(eU.style.display="flex",eD.querySelector(".account-page-container").appendChild(eU)),eD.insertAdjacentHTML("afterend",'<div class="avatar-modal-overlay" id="avatar-modal"><div class="avatar-modal-box"><div class="avatar-modal-header"><h3>Choose Your Avatar</h3><button class="avatar-modal-close" id="avatar-modal-close">&times;</button></div><div class="avatar-category-tabs" id="avatar-category-tabs"></div><div class="avatar-grid" id="avatar-grid"></div></div></div>');let eK=document.getElementById("account-page-avatar-img"),eJ=document.getElementById("account-page-name"),eY=document.getElementById("account-page-username-value"),eQ=document.getElementById("account-page-avatar-preview-img"),eX=document.getElementById("account-section-header"),te=document.getElementById("username-list-item"),tt=document.getElementById("avatar-list-item"),ta=document.getElementById("logout-list-item"),ti=document.getElementById("my-content-section"),tn=document.getElementById("edit-username-btn"),ts=document.getElementById("clear-cache-btn"),tl=document.getElementById("account-page-logout-btn"),tr=document.getElementById("edit-avatar-btn"),to=document.getElementById("avatar-modal"),td=document.getElementById("avatar-modal-close"),tc=document.getElementById("avatar-category-tabs"),t_=document.getElementById("avatar-grid"),t1=document.getElementById("open-theme-settings-modal-mobile"),tp=document.getElementById("theme-settings-overlay");tr.addEventListener("click",()=>{let e=JSON.parse(localStorage.getItem(s));e&&!e.isGuest&&e9()}),td.addEventListener("click",eG),to.addEventListener("click",e=>{e.target===to&&eG()}),tn.addEventListener("click",e=>{e.preventDefault();let t=JSON.parse(localStorage.getItem(s));t&&!t.isGuest&&showCustomPrompt("Edit Username","Enter your new display name:",t.name,e=>{e&&""!==e.trim()?(t.name=e.trim(),localStorage.setItem(s,JSON.stringify(t)),sessionStorage.setItem("showToastAfterReload","Username updated successfully."),location.reload()):null!==e&&showCustomAlert("Invalid Name","Display name cannot be empty.")})}),ts.addEventListener("click",e=>{e.preventDefault(),showCustomConfirm("Confirm Clear Cache","This will clear your watch history, favorites, and watchlist. Are you sure?",()=>{let e=[s,"sidebarState","supabase_client_id"];for(let t=localStorage.length-1;t>=0;t--){let a=localStorage.key(t);e.includes(a)||a.startsWith("slider_cache_")||localStorage.removeItem(a)}sessionStorage.clear(),sessionStorage.setItem("showToastAfterReload","Cache has been cleared."),location.reload()})}),tl.addEventListener("click",e=>{e.preventDefault(),showCustomConfirm("Confirm Logout","Are you sure you want to log out?",()=>{localStorage.removeItem(s),sessionStorage.setItem("showToastAfterReload","You have been logged out."),location.reload()})}),t1&&tp&&t1.addEventListener("click",e=>{e.preventDefault(),tp.style.display="flex",setTimeout(()=>tp.classList.add("is-visible"),10)}),eW(),function(){let e=document.getElementById("avatar-data-source");if(!e)return;let t=Array.from(e.children).map(e=>({name:e.dataset.name,avatars:Array.from(e.querySelectorAll("img")).map(e=>e.src)}));tc.innerHTML="",t.forEach((e,a)=>{let i=document.createElement("button");i.className="avatar-category-tab",i.textContent=e.name,i.addEventListener("click",()=>eR(a,t)),tc.appendChild(i)}),t.length>0&&eR(0,t)}(),window.addEventListener("storage",e=>{e.key===s&&eW()})}}let t$=document.getElementById("loginModalOverlay"),t0=document.getElementById("user-logged-out"),tm=document.getElementById("user-logged-in");if(t$){let tu=function(){t$.classList.remove("hidden"),t4&&t4.focus()},tg=function(){t$.classList.add("hidden")},th=document.getElementById("cancelLoginBtn"),tv=document.getElementById("loginWithDisplayNameBtn"),tf=document.getElementById("loginAsGuestBtn"),t4=document.getElementById("displayNameInput");document.addEventListener("click",function(e){("showLoginModalBtn"===e.target.id||e.target.closest("#showLoginModalBtn"))&&(e.preventDefault(),tu())}),th&&th.addEventListener("click",tg),t$.addEventListener("click",e=>{e.target===t$&&tg()}),tv&&tv.addEventListener("click",()=>{let e=t4.value.trim();e?(localStorage.setItem(s,JSON.stringify({name:e,isGuest:!1})),sessionStorage.setItem("showToastAfterReload","Logged in as "+e),location.reload()):window.showCustomAlert?showCustomAlert("Login Error","Please enter a display name."):alert("Please enter a display name.")}),tf&&tf.addEventListener("click",()=>{localStorage.setItem(s,JSON.stringify({name:"Guest",isGuest:!0})),sessionStorage.setItem("showToastAfterReload","Logged in as Guest."),location.reload()})}let t2=document.getElementById("modalClearDataBtn"),ty=document.getElementById("modalLogoutBtn");ty&&ty.addEventListener("click",e=>{e.preventDefault(),window.showCustomConfirm&&showCustomConfirm("Confirm Logout","Are you sure you want to log out?",()=>{localStorage.removeItem(s),sessionStorage.setItem("showToastAfterReload","You have been logged out."),location.reload()})}),t2&&t2.addEventListener("click",e=>{e.preventDefault(),window.showCustomConfirm&&showCustomConfirm("Confirm Clear Cache","This will clear your watch history, favorites, and watchlist. Are you sure?",()=>{let e=[s,"sidebarState","supabase_client_id"];for(let t=localStorage.length-1;t>=0;t--){let a=localStorage.key(t);e.includes(a)||a.startsWith("slider_cache_")||localStorage.removeItem(a)}sessionStorage.clear(),sessionStorage.setItem("showToastAfterReload","Cache has been cleared."),location.reload()})});let t3=document.querySelectorAll("[data-panel-target]"),t5=document.getElementById("notification-overlay");function t6(e,t){let a=e.getBoundingClientRect(),i=t.offsetWidth,n=a.left+a.width/2,s=n-i/2;s<20&&(s=20),s+i>window.innerWidth-20&&(s=window.innerWidth-i-20),t.style.left=s+"px",t.style.right="auto",t.style.setProperty("--arrow-position-left",n-s+"px")}if(t3.forEach(e=>{e.addEventListener("click",function(e){e.preventDefault(),e.stopPropagation();let t=this.getAttribute("data-panel-target"),a=document.querySelector(t);if(!a)return;let i=a.classList.contains("is-visible");if(document.querySelectorAll(".header-dropdown-panel.is-visible").forEach(e=>{e!==a&&e.classList.remove("is-visible")}),t5&&t5.classList.remove("is-visible"),!i){if(a.classList.add("is-visible"),"#notification-panel"===t&&window.innerWidth<=767&&t5&&t5.classList.add("is-visible"),window.innerWidth>767&&t6(this,a),"#notification-panel"===t){let n=document.getElementById("notification-panel-content"),s=document.getElementById("header-notifications");n&&s&&(n.innerHTML=s.innerHTML)}"#history-panel"===t&&"function"==typeof displayHistory&&displayHistory(),"#watchlist-panel"===t&&"function"==typeof renderWatchlistPanel&&renderWatchlistPanel()}})}),document.addEventListener("click",function(e){e.target.closest("[data-panel-target]")||e.target.closest(".header-dropdown-panel")||(document.querySelectorAll(".header-dropdown-panel.is-visible").forEach(e=>e.classList.remove("is-visible")),t5&&t5.classList.remove("is-visible"))}),window.innerWidth>767){let t7;t3.forEach(e=>{let t=e.getAttribute("data-panel-target"),a=document.querySelector(t);a&&(e.addEventListener("mouseenter",()=>{if(clearTimeout(t7),document.querySelectorAll(".header-dropdown-panel.is-visible").forEach(e=>e.classList.remove("is-visible")),t6(e,a),a.classList.add("is-visible"),"#notification-panel"===t){let i=document.getElementById("notification-panel-content"),n=document.getElementById("header-notifications");i&&n&&(i.innerHTML=n.innerHTML)}"#history-panel"===t&&"function"==typeof displayHistory&&displayHistory(),"#watchlist-panel"===t&&"function"==typeof renderWatchlistPanel&&renderWatchlistPanel()}),e.addEventListener("mouseleave",()=>{t7=setTimeout(()=>a.classList.remove("is-visible"),200)}),a.addEventListener("mouseenter",()=>clearTimeout(t7)),a.addEventListener("mouseleave",()=>a.classList.remove("is-visible")))})}let tb=document.body,tw=document.getElementById("sidebarToggle");tw&&("collapsed"===localStorage.getItem("sidebarState")&&tb.classList.add("sidebar-collapsed"),tb.classList.add("no-transition"),setTimeout(()=>{tb.classList.remove("no-transition")},100),tw.addEventListener("click",()=>{tb.classList.toggle("sidebar-collapsed");let e=tb.classList.contains("sidebar-collapsed")?"collapsed":"expanded";localStorage.setItem("sidebarState",e),setTimeout(function(){"undefined"!=typeof $&&$.fn.owlCarousel&&$("#dynamic-main-slider, #PopularPosts1 .owl-carousel").trigger("refresh.owl.carousel")},350)}));let tk=sessionStorage.getItem("showToastAfterReload");if(tk){var tC;tC=tk,_&&p&&(p.textContent=tC,_.classList.remove("hidden"),setTimeout(()=>_.classList.add("show"),10),setTimeout(()=>{_.classList.remove("show"),setTimeout(()=>_.classList.add("hidden"),500)},3e3)),sessionStorage.removeItem("showToastAfterReload")}a(),function e(){let t=JSON.parse(localStorage.getItem(s));if(t&&t.name){let a=document.getElementById("loggedInUserName"),i=document.getElementById("userAvatar"),n=document.getElementById("modalUserName"),l=document.getElementById("modalUserAvatar"),c=t.isGuest?r:t.avatar||o;a.textContent=t.name,i.src=c,n.textContent=t.name,l.src=c,tm.classList.remove("hidden"),t0.classList.add("hidden")}else{let _=document.getElementById("logged-out-avatar"),p=document.getElementById("logged-out-name");_&&(_.src=d),p&&(p.textContent="Me"),tm.classList.add("hidden"),t0.classList.remove("hidden")}}(),t&&i()}),document.addEventListener("DOMContentLoaded",function(){function e(){var e=document.querySelector(".upcoming-carousel-wrapper"),t=document.getElementById("upcoming-carousel-widgets"),a=document.querySelector(".upcoming-carousel-section");if(!e||!t||!a){a&&(a.style.display="none");return}e.id="upcoming-carousel";var i=t.querySelectorAll(".widget.Image");if(0===i.length){a.style.display="none";return}var n="";i.forEach(function(e){if("none"!==e.style.display&&!e.classList.contains("hidden")){var t=e.querySelector(".hidden-widget-data");if(t){var a=(t.querySelector(".data-title")||{}).textContent||"",i=(t.querySelector(".data-caption")||{}).textContent||"",s=(e.querySelector("a")||{}).href||"#",l=(e.querySelector("img")||{}).src||"";if(l){let r=i.match(/^\[(TV|Movie)\]\s*\[(.*?)\]\s*(.*)$/s),o="",d="",c=i;if(r){let _=r[1],p=r[2].trim();c=r[3].trim(),o='<span class="upcoming-thumb-type '+("tv"===_.toLowerCase()?"type-tv":"type-movie")+'">'+_+"</span>",p&&(d='<span class="upcoming-date">'+p+"</span>")}n+='<div class="item"><a class="upcoming-card" href="'+s+'"><div class="upcoming-image">'+o+'<img alt="'+a+'" src="'+l.replace(/\/s\d+(-[a-z0-9]+)*\//,"/w200-h300-c/")+'" loading="lazy"/></div><div class="upcoming-content"><h4 class="upcoming-title">'+a+"</h4>"+d+'<p class="upcoming-description">'+c+'</p><div class="upcoming-button">More Details</div></div></a></div>'}}}}),""!==n.trim()?(e.innerHTML=n,$(e).addClass("owl-carousel owl-theme").owlCarousel({loop:!1,margin:16,nav:!0,dots:!1,navText:['<svg fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 18l-6-6 6-6"/></svg>','<svg fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 6l6 6-6 6"/></svg>'],responsive:{0:{autoWidth:!0,stagePadding:20,margin:12},768:{items:2,slideBy:2},1200:{items:3,slideBy:3}}})):a.style.display="none"}window.jQuery&&jQuery.fn.owlCarousel?e():setTimeout(e,500)}),document.addEventListener("DOMContentLoaded",function(){let e=document.getElementById("mobile-genre-trigger"),t=document.getElementById("mobile-genre-sidebar"),a=document.getElementById("mobile-genre-overlay"),i=document.getElementById("mobile-genre-close"),n=document.getElementById("mobile-genre-list-container");if(e&&t&&a&&i&&n){let s=()=>{if(0===n.children.length){let e=document.querySelector(".genre-dropdown-trigger .widget-content ul");if(e){let t=e.cloneNode(!0);t.className="mobile-genre-list",n.appendChild(t)}else n.innerHTML='<p style="color: #888;">Could not load genres.</p>'}document.body.classList.add("genre-sidebar-open")},l=()=>{document.body.classList.remove("genre-sidebar-open")};e.addEventListener("click",e=>{e.preventDefault(),s()}),i.addEventListener("click",l),a.addEventListener("click",l)}})})();
